"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = createIoReducer;exports.normalizeToEntities = void 0;var _lodash = require("lodash");








var _normalizr = require("normalizr");
var _stateOperations = require("./stateOperations");function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}







var normalizeToEntities = function normalizeToEntities(data, name, options) {
  var datasets = (0, _lodash.isArray)(data) ? data : [data];
  var entities = {};
  (0, _lodash.forEach)(datasets, function (dataset) {
    var normalisedData = (0, _normalizr.normalize)(dataset, options.schemas[name]);
    (0, _lodash.forEach)(normalisedData.entities, function (entity, name) {
      entities[name] = Object.assign({}, entities[name] || {}, entity);
    });
  });
  return entities;
};exports.normalizeToEntities = normalizeToEntities;

function createIoReducer(name) {var _Object$assign3;var customActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var actionName = (0, _lodash.toUpper)((0, _lodash.snakeCase)(name));
  var entityName = (0, _lodash.camelCase)(name);

  if (!options.schemas || !options.schemas[name])
  throw new Error('Missing normalize scheme');

  return Object.assign((_Object$assign3 = {}, _defineProperty(_Object$assign3, "FIND_".concat(
  actionName), function FIND_(state, action) {
    var statuses = {
      isFinding: true };

    var entities = _defineProperty({}, entityName, {});
    return (0, _stateOperations.updateState)(state, action, {
      statusUpdate: { statuses: statuses, entities: entities },
      entityName: entityName });

  }), _defineProperty(_Object$assign3, "FIND_".concat(

  actionName, "_FAILED"), function FIND__FAILED(state, action) {
    var statuses = {
      isFinding: false };

    var entities = _defineProperty({}, entityName, {});
    return (0, _stateOperations.updateState)(state, action, {
      statusUpdate: { statuses: statuses, entities: entities },
      entityName: entityName });

  }), _defineProperty(_Object$assign3, "FIND_".concat(

  actionName, "_COMPLETED"), function FIND__COMPLETED(state, action) {
    var entities = normalizeToEntities(action.payload, entityName, options);
    var statuses = {
      init: true,
      isFinding: false };

    return (0, _stateOperations.upsertEntitiesToState)(state, action, { entities: entities, statuses: statuses, entityName: entityName });
  }), _defineProperty(_Object$assign3, "RECEIVE_".concat(

  actionName), function RECEIVE_(state, action) {
    var entities = normalizeToEntities(action.data, name, options);
    return (0, _stateOperations.upsertEntitiesToState)(state, action, { entities: entities, entityName: entityName });
  }), _defineProperty(_Object$assign3, "REMOVE_".concat(

  actionName), function REMOVE_(state, action) {
    var entities = normalizeToEntities(action.data, name, options);
    return (0, _stateOperations.removeEntitiesFromState)(state, action, { entities: entities, cache: false, entityName: entityName });
  }), _defineProperty(_Object$assign3, "CREATE_".concat(

  actionName), function CREATE_(state, action) {
    var entities = normalizeToEntities(action.payload, entityName, options);
    var statuses = {
      isWriting: true };

    return (0, _stateOperations.addEntitiesToState)(state, action, { entities: entities, statuses: statuses, cache: true, entityName: entityName });
  }), _defineProperty(_Object$assign3, "CREATE_".concat(

  actionName, "_FAILED"), function CREATE__FAILED(state, action) {
    var entities = state.actionCache[action.uuid];
    var statuses = {
      isWriting: false };

    return (0, _stateOperations.removeEntitiesFromState)(state, action, { entities: entities, statuses: statuses, cache: false, entityName: entityName });
  }), _defineProperty(_Object$assign3, "CREATE_".concat(

  actionName, "_COMPLETED"), function CREATE__COMPLETED(state, action) {
    var statuses = {
      isWriting: false };

    var entities = normalizeToEntities(action.payload, entityName, options);
    return (0, _stateOperations.upsertEntitiesToState)(state, action, { entities: entities, statuses: statuses, cache: false, entityName: entityName }, options);
  }), _defineProperty(_Object$assign3, "UPDATE_".concat(

  actionName), function UPDATE_(state, action) {
    var entities = normalizeToEntities(action.payload, entityName, options);
    var statuses = {
      isWriting: true };

    return (0, _stateOperations.updateEntitiesInState)(state, action, { entities: entities, statuses: statuses, cache: true, entityName: entityName }, options);
  }), _defineProperty(_Object$assign3, "UPDATE_".concat(

  actionName, "_FAILED"), function UPDATE__FAILED(state, action) {
    var entities = state.actionCache[action.uuid];
    var statuses = {
      isWriting: false };

    return (0, _stateOperations.updateEntitiesInState)(state, action, { entities: entities, statuses: statuses, cache: false, entityName: entityName }, options);
  }), _defineProperty(_Object$assign3, "UPDATE_".concat(

  actionName, "_COMPLETED"), function UPDATE__COMPLETED(state, action) {
    var statuses = {
      isWriting: false };

    var entities = normalizeToEntities(action.payload, entityName, options);
    return (0, _stateOperations.upsertEntitiesToState)(state, action, { entities: entities, statuses: statuses, cache: false, entityName: entityName }, options);
  }), _defineProperty(_Object$assign3, "DESTROY_".concat(

  actionName), function DESTROY_(state, action) {
    var entities = normalizeToEntities(action.payload, entityName, options);
    var statuses = {
      isWriting: true };

    return (0, _stateOperations.removeEntitiesFromState)(state, action, { entities: entities, statuses: statuses, cache: true, entityName: entityName });
  }), _defineProperty(_Object$assign3, "DESTROY_".concat(

  actionName, "_FAILED"), function DESTROY__FAILED(state, action) {
    var entities = state.actionCache[action.uuid];
    var statuses = {
      isWriting: false };

    return (0, _stateOperations.addEntitiesToState)(state, action, { entities: entities, statuses: statuses, cache: false, entityName: entityName });
  }), _defineProperty(_Object$assign3, "DESTROY_".concat(

  actionName, "_COMPLETED"), function DESTROY__COMPLETED(state, action) {
    var statuses = {
      isWriting: false };

    var entities = _defineProperty({}, entityName, {});
    return (0, _stateOperations.updateState)(state, action, {
      statusUpdate: { statuses: statuses, entities: entities },
      entityName: entityName });

  }), _defineProperty(_Object$assign3, "SELECT_".concat(

  actionName), function SELECT_(state, action) {var
    data = action.data;
    // TODO: Object workaround
    var key = (0, _lodash.isObject)(data) ? data[options.keyName] : data;
    var selected = (0, _lodash.isArray)(key) ? key : [key];
    var statuses = {
      selected: selected };

    var entities = _defineProperty({}, entityName, {});
    return (0, _stateOperations.updateState)(state, action, {
      statusUpdate: { statuses: statuses, entities: entities },
      entityName: entityName });

  }), _defineProperty(_Object$assign3, "CLEAR_".concat(

  actionName), function CLEAR_(state) {
    return Object.assign({}, state, _defineProperty({},
    entityName, {}));

  }), _defineProperty(_Object$assign3, "RESET_".concat(

  actionName), function RESET_(state) {
    // TODO: Reset errors and cache
    return Object.assign({}, state, _defineProperty({},
    entityName, {}));

  }), _Object$assign3),

  (0, _lodash.mapValues)(customActions, function (reducer) {return function (state, action) {
      var instanceState = Object.assign({}, state[name]);
      return Object.assign({}, state, _defineProperty({}, name, reducer(instanceState, action)));
    };}));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9yZWR1Y2Vycy9jcmVhdGVJb1JlZHVjZXJzLmpzIl0sIm5hbWVzIjpbIm5vcm1hbGl6ZVRvRW50aXRpZXMiLCJkYXRhIiwibmFtZSIsIm9wdGlvbnMiLCJkYXRhc2V0cyIsImVudGl0aWVzIiwiZGF0YXNldCIsIm5vcm1hbGlzZWREYXRhIiwic2NoZW1hcyIsImVudGl0eSIsIk9iamVjdCIsImFzc2lnbiIsImNyZWF0ZUlvUmVkdWNlciIsImN1c3RvbUFjdGlvbnMiLCJhY3Rpb25OYW1lIiwiZW50aXR5TmFtZSIsIkVycm9yIiwic3RhdGUiLCJhY3Rpb24iLCJzdGF0dXNlcyIsImlzRmluZGluZyIsInN0YXR1c1VwZGF0ZSIsInBheWxvYWQiLCJpbml0IiwiY2FjaGUiLCJpc1dyaXRpbmciLCJhY3Rpb25DYWNoZSIsInV1aWQiLCJrZXkiLCJrZXlOYW1lIiwic2VsZWN0ZWQiLCJyZWR1Y2VyIiwiaW5zdGFuY2VTdGF0ZSJdLCJtYXBwaW5ncyI6ImtKQUFBOzs7Ozs7Ozs7QUFTQTtBQUNBLG9EOzs7Ozs7OztBQVFPLElBQU1BLG1CQUFtQixHQUFHLFNBQXRCQSxtQkFBc0IsQ0FBQ0MsSUFBRCxFQUFPQyxJQUFQLEVBQWFDLE9BQWIsRUFBeUI7QUFDMUQsTUFBSUMsUUFBUSxHQUFHLHFCQUFRSCxJQUFSLElBQWdCQSxJQUFoQixHQUF1QixDQUFDQSxJQUFELENBQXRDO0FBQ0EsTUFBSUksUUFBUSxHQUFHLEVBQWY7QUFDQSx1QkFBUUQsUUFBUixFQUFrQixVQUFBRSxPQUFPLEVBQUk7QUFDM0IsUUFBSUMsY0FBYyxHQUFHLDBCQUFVRCxPQUFWLEVBQW1CSCxPQUFPLENBQUNLLE9BQVIsQ0FBZ0JOLElBQWhCLENBQW5CLENBQXJCO0FBQ0EseUJBQVFLLGNBQWMsQ0FBQ0YsUUFBdkIsRUFBaUMsVUFBQ0ksTUFBRCxFQUFTUCxJQUFULEVBQWtCO0FBQ2pERyxNQUFBQSxRQUFRLENBQUNILElBQUQsQ0FBUixHQUFpQlEsTUFBTSxDQUFDQyxN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c25ha2VDYXNlLFxyXG4gIGNhbWVsQ2FzZSxcclxuICBpc0FycmF5LFxyXG4gIG1hcFZhbHVlcyxcclxuICBpc09iamVjdCxcclxuICBmb3JFYWNoXHJcbn0gZnJvbSAnbG9kYXNoJztcclxuaW1wb3J0IHsgbm9ybWFsaXplIH0gZnJvbSAnbm9ybWFsaXpyJztcclxuaW1wb3J0IHtcclxuICB1cGRhdGVTdGF0ZSxcclxuICB1cHNlcnRFbnRpdGllc1RvU3RhdGUsXHJcbiAgYWRkRW50aXRpZXNUb1N0YXRlLFxyXG4gIHVwZGF0ZUVudGl0aWVzSW5TdGF0ZSxcclxuICByZW1vdmVFbnRpdGllc0Zyb21TdGF0ZVxyXG59IGZyb20gJy4vc3RhdGVPcGVyYXRpb25zJztcclxuXHJcbmV4cG9ydCBjb25zdCBub3JtYWxpemVUb0VudGl0aWVzID0gKGRhdGEsIG5hbWUsIG9wdGlvbnMpID0+IHtcclxuICBsZXQgZGF0YXNldHMgPSBpc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcclxuICBsZXQgZW50aXRpZXMgPSB7fTtcclxuICBmb3JFYWNoKGRhdGFzZXRzLCBkYXRhc2V0ID0+IHtcclxuICAgIGxldCBub3JtYWxpc2VkRGF0YSA9IG5vcm1hbGl6ZShkYXRhc2V0LCBvcHRpb25zLnNjaGVtYXNbbmFtZV0pO1xyXG4gICAgZm9yRWFjaChub3JtYWxpc2VkRGF0YS5lbnRpdGllcywgKGVudGl0eSwgbmFtZSkgPT4ge1xyXG4gICAgICBlbnRpdGllc1tuYW1lXSA9IE9iamVjdC5hc3NpZ24oe30sIChlbnRpdGllc1tuYW1lXSB8fCB7fSksIGVudGl0eSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICByZXR1cm4gZW50aXRpZXM7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVJb1JlZHVjZXIobmFtZSwgY3VzdG9tQWN0aW9ucyA9IHt9LCBvcHRpb25zID0ge30pIHtcclxuICBjb25zdCBhY3Rpb25OYW1lID0gdG9VcHBlcihzbmFrZUNhc2UobmFtZSkpO1xyXG4gIGNvbnN0IGVudGl0eU5hbWUgPSBjYW1lbENhc2UobmFtZSk7XHJcblxyXG4gIGlmICghb3B0aW9ucy5zY2hlbWFzIHx8ICFvcHRpb25zLnNjaGVtYXNbbmFtZV0pXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3Npbmcgbm9ybWFsaXplIHNjaGVtZScpO1xyXG5cclxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XHJcbiAgICBbYEZJTkRfJHthY3Rpb25OYW1lfWBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNGaW5kaW5nOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGVudGl0aWVzID0geyBbZW50aXR5TmFtZV06IHt9fTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZVN0YXRlKHN0YXRlLCBhY3Rpb24sIHtcclxuICAgICAgICBzdGF0dXNVcGRhdGU6IHsgc3RhdHVzZXMsIGVudGl0aWVzIH0sXHJcbiAgICAgICAgZW50aXR5TmFtZVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BGSU5EXyR7YWN0aW9uTmFtZX1fRkFJTEVEYF0oc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBjb25zdCBzdGF0dXNlcyA9IHtcclxuICAgICAgICBpc0ZpbmRpbmc6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGVudGl0aWVzID0geyBbZW50aXR5TmFtZV06IHt9fTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZVN0YXRlKHN0YXRlLCBhY3Rpb24sIHtcclxuICAgICAgICBzdGF0dXNVcGRhdGU6IHsgc3RhdHVzZXMsIGVudGl0aWVzIH0sXHJcbiAgICAgICAgZW50aXR5TmFtZVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BGSU5EXyR7YWN0aW9uTmFtZX1fQ09NUExFVEVEYF0oc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBjb25zdCBlbnRpdGllcyA9IG5vcm1hbGl6ZVRvRW50aXRpZXMoYWN0aW9uLnBheWxvYWQsIGVudGl0eU5hbWUsIG9wdGlvbnMpO1xyXG4gICAgICBjb25zdCBzdGF0dXNlcyA9IHtcclxuICAgICAgICBpbml0OiB0cnVlLFxyXG4gICAgICAgIGlzRmluZGluZzogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHVwc2VydEVudGl0aWVzVG9TdGF0ZShzdGF0ZSwgYWN0aW9uLCB7IGVudGl0aWVzLCBzdGF0dXNlcywgZW50aXR5TmFtZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BSRUNFSVZFXyR7YWN0aW9uTmFtZX1gXShzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGVudGl0aWVzID0gbm9ybWFsaXplVG9FbnRpdGllcyhhY3Rpb24uZGF0YSwgbmFtZSwgb3B0aW9ucyk7XHJcbiAgICAgIHJldHVybiB1cHNlcnRFbnRpdGllc1RvU3RhdGUoc3RhdGUsIGFjdGlvbiwgeyBlbnRpdGllcywgZW50aXR5TmFtZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BSRU1PVkVfJHthY3Rpb25OYW1lfWBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSBub3JtYWxpemVUb0VudGl0aWVzKGFjdGlvbi5kYXRhLCBuYW1lLCBvcHRpb25zKTtcclxuICAgICAgcmV0dXJuIHJlbW92ZUVudGl0aWVzRnJvbVN0YXRlKHN0YXRlLCBhY3Rpb24sIHsgZW50aXRpZXMsIGNhY2hlOiBmYWxzZSwgZW50aXR5TmFtZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BDUkVBVEVfJHthY3Rpb25OYW1lfWBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSBub3JtYWxpemVUb0VudGl0aWVzKGFjdGlvbi5wYXlsb2FkLCBlbnRpdHlOYW1lLCBvcHRpb25zKTtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNXcml0aW5nOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBhZGRFbnRpdGllc1RvU3RhdGUoc3RhdGUsIGFjdGlvbiwgeyBlbnRpdGllcywgc3RhdHVzZXMsIGNhY2hlOiB0cnVlLCBlbnRpdHlOYW1lIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBbYENSRUFURV8ke2FjdGlvbk5hbWV9X0ZBSUxFRGBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSBzdGF0ZS5hY3Rpb25DYWNoZVthY3Rpb24udXVpZF07XHJcbiAgICAgIGNvbnN0IHN0YXR1c2VzID0ge1xyXG4gICAgICAgIGlzV3JpdGluZzogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHJlbW92ZUVudGl0aWVzRnJvbVN0YXRlKHN0YXRlLCBhY3Rpb24sIHsgZW50aXRpZXMsIHN0YXR1c2VzLCBjYWNoZTogZmFsc2UsIGVudGl0eU5hbWUgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIFtgQ1JFQVRFXyR7YWN0aW9uTmFtZX1fQ09NUExFVEVEYF0oc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBjb25zdCBzdGF0dXNlcyA9IHtcclxuICAgICAgICBpc1dyaXRpbmc6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGVudGl0aWVzID0gbm9ybWFsaXplVG9FbnRpdGllcyhhY3Rpb24ucGF5bG9hZCwgZW50aXR5TmFtZSwgb3B0aW9ucyk7XHJcbiAgICAgIHJldHVybiB1cHNlcnRFbnRpdGllc1RvU3RhdGUoc3RhdGUsIGFjdGlvbiwgeyBlbnRpdGllcywgc3RhdHVzZXMsIGNhY2hlOiBmYWxzZSwgZW50aXR5TmFtZSB9LCBvcHRpb25zKTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BVUERBVEVfJHthY3Rpb25OYW1lfWBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSBub3JtYWxpemVUb0VudGl0aWVzKGFjdGlvbi5wYXlsb2FkLCBlbnRpdHlOYW1lLCBvcHRpb25zKTtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNXcml0aW5nOiB0cnVlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB1cGRhdGVFbnRpdGllc0luU3RhdGUoc3RhdGUsIGFjdGlvbiwgeyBlbnRpdGllcywgc3RhdHVzZXMsIGNhY2hlOiB0cnVlLCBlbnRpdHlOYW1lIH0sIG9wdGlvbnMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBbYFVQREFURV8ke2FjdGlvbk5hbWV9X0ZBSUxFRGBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSBzdGF0ZS5hY3Rpb25DYWNoZVthY3Rpb24udXVpZF07XHJcbiAgICAgIGNvbnN0IHN0YXR1c2VzID0ge1xyXG4gICAgICAgIGlzV3JpdGluZzogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZUVudGl0aWVzSW5TdGF0ZShzdGF0ZSwgYWN0aW9uLCB7IGVudGl0aWVzLCBzdGF0dXNlcywgY2FjaGU6IGZhbHNlLCBlbnRpdHlOYW1lIH0sIG9wdGlvbnMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBbYFVQREFURV8ke2FjdGlvbk5hbWV9X0NPTVBMRVRFRGBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNXcml0aW5nOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBlbnRpdGllcyA9IG5vcm1hbGl6ZVRvRW50aXRpZXMoYWN0aW9uLnBheWxvYWQsIGVudGl0eU5hbWUsIG9wdGlvbnMpO1xyXG4gICAgICByZXR1cm4gdXBzZXJ0RW50aXRpZXNUb1N0YXRlKHN0YXRlLCBhY3Rpb24sIHsgZW50aXRpZXMsIHN0YXR1c2VzLCBjYWNoZTogZmFsc2UsIGVudGl0eU5hbWUgfSwgb3B0aW9ucyk7XHJcbiAgICB9LFxyXG5cclxuICAgIFtgREVTVFJPWV8ke2FjdGlvbk5hbWV9YF0oc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBjb25zdCBlbnRpdGllcyA9IG5vcm1hbGl6ZVRvRW50aXRpZXMoYWN0aW9uLnBheWxvYWQsIGVudGl0eU5hbWUsIG9wdGlvbnMpO1xyXG4gICAgICBjb25zdCBzdGF0dXNlcyA9IHtcclxuICAgICAgICBpc1dyaXRpbmc6IHRydWVcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHJlbW92ZUVudGl0aWVzRnJvbVN0YXRlKHN0YXRlLCBhY3Rpb24sIHsgZW50aXRpZXMsIHN0YXR1c2VzLCBjYWNoZTogdHJ1ZSwgZW50aXR5TmFtZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgW2BERVNUUk9ZXyR7YWN0aW9uTmFtZX1fRkFJTEVEYF0oc3RhdGUsIGFjdGlvbikge1xyXG4gICAgICBjb25zdCBlbnRpdGllcyA9IHN0YXRlLmFjdGlvbkNhY2hlW2FjdGlvbi51dWlkXTtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNXcml0aW5nOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gYWRkRW50aXRpZXNUb1N0YXRlKHN0YXRlLCBhY3Rpb24sIHsgZW50aXRpZXMsIHN0YXR1c2VzLCBjYWNoZTogZmFsc2UsIGVudGl0eU5hbWUgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIFtgREVTVFJPWV8ke2FjdGlvbk5hbWV9X0NPTVBMRVRFRGBdKHN0YXRlLCBhY3Rpb24pIHtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgaXNXcml0aW5nOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBlbnRpdGllcyA9IHsgW2VudGl0eU5hbWVdOiB7fX07XHJcbiAgICAgIHJldHVybiB1cGRhdGVTdGF0ZShzdGF0ZSwgYWN0aW9uLCB7XHJcbiAgICAgICAgc3RhdHVzVXBkYXRlOiB7IHN0YXR1c2VzLCBlbnRpdGllcyB9LFxyXG4gICAgICAgIGVudGl0eU5hbWVcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIFtgU0VMRUNUXyR7YWN0aW9uTmFtZX1gXShzdGF0ZSwgYWN0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYWN0aW9uO1xyXG4gICAgICAvLyBUT0RPOiBPYmplY3Qgd29ya2Fyb3VuZFxyXG4gICAgICBsZXQga2V5ID0gaXNPYmplY3QoZGF0YSkgPyBkYXRhW29wdGlvbnMua2V5TmFtZV0gOiBkYXRhO1xyXG4gICAgICBsZXQgc2VsZWN0ZWQgPSBpc0FycmF5KGtleSkgPyBrZXkgOiBba2V5XTtcclxuICAgICAgY29uc3Qgc3RhdHVzZXMgPSB7XHJcbiAgICAgICAgc2VsZWN0ZWRcclxuICAgICAgfTtcclxuICAgICAgY29uc3QgZW50aXRpZXMgPSB7IFtlbnRpdHlOYW1lXToge319O1xyXG4gICAgICByZXR1cm4gdXBkYXRlU3RhdGUoc3RhdGUsIGFjdGlvbiwge1xyXG4gICAgICAgIHN0YXR1c1VwZGF0ZTogeyBzdGF0dXNlcywgZW50aXRpZXMgfSxcclxuICAgICAgICBlbnRpdHlOYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBbYENMRUFSXyR7YWN0aW9uTmFtZX1gXShzdGF0ZSkge1xyXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIHtcclxuICAgICAgICBbZW50aXR5TmFtZV06IHt9XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBbYFJFU0VUXyR7YWN0aW9uTmFtZX1gXShzdGF0ZSkge1xyXG4gICAgICAvLyBUT0RPOiBSZXNldCBlcnJvcnMgYW5kIGNhY2hlXHJcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwge1xyXG4gICAgICAgIFtlbnRpdHlOYW1lXToge31cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBtYXBWYWx1ZXMoY3VzdG9tQWN0aW9ucywgcmVkdWNlciA9PiAoc3RhdGUsIGFjdGlvbikgPT4ge1xyXG4gICAgY29uc3QgaW5zdGFuY2VTdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlW25hbWVdKTtcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwgeyBbbmFtZV06IHJlZHVjZXIoaW5zdGFuY2VTdGF0ZSwgYWN0aW9uKSB9KTtcclxuICB9KSk7XHJcbn0iXX0=