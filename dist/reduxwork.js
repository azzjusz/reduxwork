!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.reduxwork=t(require("lodash")):e.reduxwork=t(e._)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,u){return function(o){if(e.addKeyOnCreate&&"CREATE"==t){var s=e.keyName||"id";r[s]||(r[s]=(new Date).getTime())}return o({type:t?t+"_"+n.toUpperCase():n.toUpperCase(),data:r}),"socket"==u.type?(0,i.default)(e,t,n.toUpperCase(),o,r,a,u):"fetch"==u.type?(0,c.default)(e,t,n.toUpperCase(),o,r,a,u):void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(3),i=r(u),o=n(1),c=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,u,o){if(t=t.toUpperCase(),e||(e={}),e.fetchFunction)return new Promise(function(o,s){e.fetchFunction((0,c.default)(e,t,n,a),(0,i.default)(e,t,a)).then(function(e){return e.json()}).then(function(e){return e.err?(r({type:t+"_"+n.toUpperCase()+"_FAILED",error:e.err}),s(e.err)):(r({type:t+"_"+n.toUpperCase()+"_COMPLETED",data:e}),o(e)),u&&u(e.err,e),u})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(9),i=r(u),o=n(10),c=r(o)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t,n,r,a,u,i){if(t&&(t=t.toUpperCase()),e||(e={}),e.eventName||(e.eventName="redux_action_event"),e.socketIoFunction){var o={type:t?t+"_"+n:n};return a&&(o.data=a),new Promise(function(a,i){e.socketIoFunction(e.eventName,o,function(e,o){return e?(r({type:(t?t+"_"+n:n)+"_FAILED",error:e}),i(e)):(r({type:(t?t+"_"+n:n)+"_COMPLETED",data:o}),a(o)),u&&u(e,o),u})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n,r,u,o,c){if(r&&"object"!==(void 0===r?"undefined":a(r))){var s=r;r={},r[e.idName]=s}return"function"==typeof u&&(o=u,u=null),function(a){var s={type:t+"_"+n.toUpperCase()};return u&&(s.query=u),r&&(s.params=r),a(s),(0,i.default)(e,t,n.toUpperCase(),a,{params:r,query:u},o,c)}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var u=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(7),u=r(a),i=n(8),o=r(i),c=n(11),s=r(c),f=n(12),d=n(13),l=n(14),p=n(15),y=r(p),m=n(16),_=r(m),E=n(17),v=r(E),A={createAction:u.default,createSocketAction:o.default,createLocalActions:s.default,createSocketActions:f.createSocketActions,createFetchActions:f.createFetchActions,createIoActions:f.createIoActions,createSocketGetAction:d.createSocketGetAction,createFetchGetAction:d.createFetchGetAction,createGetAction:d.createGetAction,createSocketPostAction:l.createSocketPostAction,createFetchPostAction:l.createFetchPostAction,createPostAction:l.createPostAction,createReducer:y.default,createIoReducers:_.default,createLocalReducers:v.default};t.default=A,t.createAction=u.default,t.createSocketAction=o.default,t.createLocalActions=s.default,t.createSocketActions=f.createSocketActions,t.createFetchActions=f.createFetchActions,t.createIoActions=f.createIoActions,t.createSocketGetAction=d.createSocketGetAction,t.createFetchGetAction=d.createFetchGetAction,t.createGetAction=d.createGetAction,t.createSocketPostAction=l.createSocketPostAction,t.createFetchPostAction=l.createFetchPostAction,t.createPostAction=l.createPostAction,t.createReducer=y.default,t.createIoReducers=_.default,t.createLocalReducers=v.default},function(e,t,n){"use strict";function r(e,t){return function(n){var r={type:e};return t&&(r[t]=n),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return n||(n={}),n.type="socket",function(r,a){return(0,u.default)(e,null,t,r,a,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e,t,n){var r=e.fetchOptions||a;return r.method="GET"==t||"FIND"==t||"SYNC"==t?"GET":"POST"==t||"CREATE"==t?"POST":"UPDATE"==t?"PUT":"DESTROY"==t?"DELETE":"POST","GET"!=r.method&&(r.body=JSON.stringify(n)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a={credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}},function(e,t,n){"use strict";function r(e,t,n,r){var a=null,u=e.baseURL;if(r.params&&r.params[e.idName]&&(a=r.params[e.idName]),e.customUrl){u+=e.customUrl;for(var i in r.params)u=u.replace("%"+i,r.params[i]);if(r.query){var o=!0;u+="/";for(var c in r.query)o?(u+="?"+c+"="+r.query[c],o=!1):u+="&"+c+"="+r.query[c]}}else if(u+=a?"/"+n.toLowerCase()+"/"+t.toLowerCase()+"/"+a:"/"+n.toLowerCase()+"/"+t.toLowerCase(),r.query){var s=!0;u+="/";for(var c in r.query)s?(u+="?"+c+"="+r.query[c],s=!1):u+="&"+c+"="+r.query[c]}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){var a;return a={},r(a,"find"+t,function(e,n){return{type:"FIND_"+t.toUpperCase(),data:e}}),r(a,"sync"+t,function(e,n){return{type:"SYNC_"+t.toUpperCase(),data:e}}),r(a,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(a,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(a,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(a,"create"+t,function(e){return{type:"CREATE_"+t.toUpperCase(),data:e}}),r(a,"update"+t,function(e){return{type:"UPDATE_"+t.toUpperCase(),data:e}}),r(a,"destroy"+t,function(e){return{type:"DESTROY_"+t.toUpperCase(),data:e}}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n){var r;return n||(n={}),n.type="socket",r={},a(r,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(r,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(r,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(r,"find"+t,function(r,a){return(0,d.default)(e,"FIND",t,r,a,n)}),a(r,"sync"+t,function(r,a){return(0,d.default)(e,"SYNC",t,r,a,n)}),a(r,"create"+t,function(r,a){return(0,d.default)(e,"CREATE",t,r,a,n)}),a(r,"update"+t,function(r,a,u){return(0,d.default)(e,"UPDATE",t,r,a,n)}),a(r,"destroy"+t,function(r,a){return(0,d.default)(e,"DESTROY",t,r,a,n)}),r}function i(e,t,n){var r;return n||(n={}),n.type="fetch",r={},a(r,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(r,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(r,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(r,"find"+t,function(r,a,u){return(0,s.default)(e,"FIND",t,r,a,u,n)}),a(r,"sync"+t,function(r,a,u){return(0,s.default)(e,"SYNC",t,r,a,u,n)}),a(r,"create"+t,function(r,a){return(0,d.default)(e,"CREATE",t,r,a,n)}),a(r,"update"+t,function(r,a,u){return(0,d.default)(e,"UPDATE",t,r,a,n)}),a(r,"destroy"+t,function(r,a){return(0,d.default)(e,"DESTROY",t,r,a,n)}),r}function o(e,t,n){return"socket"==n.type?u(e,t,n):"fetch"==n.type?i(e,t,n):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketActions=u,t.createFetchActions=i,t.createIoActions=o;var c=n(4),s=r(c),f=n(0),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return n||(n={}),n.type="socket",function(r,a){return(0,d.default)(e,"GET",t,params,query,a,n)}}function u(e,t,n){return n||(n={}),n.type="fetch",function(r,a,u){return(0,s.default)(e,"GET",t,params,a,u,n)}}function i(e,t,n){return"socket"==n.type?a(e,t,n):"fetch"==n.type?u(e,t,n):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketGetAction=a,t.createFetchGetAction=u,t.createGetAction=i;var o=n(2),c=(r(o),n(4)),s=r(c),f=n(0),d=r(f),l=n(3),p=(r(l),n(1));r(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return n||(n={}),n.type="socket",function(r,a){return(0,s.default)(e,"POST",t,r,a,n)}}function u(e,t,n){return n||(n={}),n.type="fetch",function(r,a){return(0,s.default)(e,"POST",t,r,a,n)}}function i(e,t,n){return"socket"==n.type?a(e,t,n):"fetch"==n.type?u(e,t,n):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketPostAction=a,t.createFetchPostAction=u,t.createPostAction=i;var o=n(4),c=(r(o),n(0)),s=r(c),f=n(3),d=(r(f),n(1));r(d)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,a,u){n||(n={}),a||(a={});var o=Object.assign({},n);return t=i.default.toUpper(i.default.snakeCase(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,n=arguments[1],u=Object.assign(r({},"RESET_"+t,function(e,t){return Object.assign({},o)}));return a[n.type]?a[n.type](e,n):u[n.type]?u[n.type](e,n):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t,n,u,i){i=Object.assign({keyName:"id"},e,i),n||(n={}),u||(u={});var c=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments[1],f=Object.assign((e={},r(e,"FIND_"+t,function(e,t){var n={isFinding:!0,findError:null};return n.query=t.query||null,n.params=t.params||null,o.default.isEqual(n.query,e.query)&&o.default.isEqual(n.params,e.params)||(n.items=[]),Object.assign({},e,n)}),r(e,"FIND_"+t+"_FAILED",function(e,t){return Object.assign({},e,{findError:t.error,isFinding:!1})}),r(e,"FIND_"+t+"_COMPLETED",function(e,t){return Object.assign({},e,{init:!0,isFinding:!1,findError:null,items:t.data})}),r(e,"SYNC_"+t,function(e,t){return Object.assign({},e,{isSyncing:!0,syncError:null})}),r(e,"SYNC_"+t+"_FAILED",function(e,t){return Object.assign({},e,{syncError:t.error,isSyncing:!1})}),r(e,"SYNC_"+t+"_COMPLETED",function(e,t){var n=t.data;o.default.isArray(n)||(n=[n]);var r=o.default.unionBy(n,[].concat(a(e.items)),i.keyName);return Object.assign({},e,{isSyncing:!1,syncError:null,init:!0,items:r})}),r(e,"RECEIVE_"+t,function(e,t){var n=t.data;o.default.isArray(n)||(n=[n]);var r=o.default.unionBy(n,[].concat(a(e.items)),i.keyName);return Object.assign({},e,{items:r})}),r(e,"CREATE_"+t,function(e,t){var n=Object.assign({},t.data,{_temp:!0});return Object.assign({},e,{isWritting:!0,items:[].concat(a(e.items),[n])})}),r(e,"CREATE_"+t+"_FAILED",function(e,t){var n=e.items.filter(function(e){return e[i.keyName]!==t.tempId});return Object.assign({},e,{isWritting:!1,items:n,writeError:t.error})}),r(e,"CREATE_"+t+"_COMPLETED",function(e,t){var n=e.items.filter(function(e){return e[i.keyName]!==t.tempId});return Object.assign({},e,{isWritting:!1,writeError:null,items:[].concat(a(n),[t.data])})}),r(e,"UPDATE_"+t,function(e,t){var n={isWritting:!0};if(o.default.isObject(t.data)&&t.data[i.keyName]){var r=[].concat(a(e.items)),u=o.default.find(r,function(e){return e[i.keyName]==t.data[i.keyName]});r.splice(o.default.findIndex(r,function(e){return e[i.keyName]==t.data[i.keyName]}),1,Object.assign({},u,t.data)),n.updatedItem=u,n.items=r}return Object.assign({},e,n)}),r(e,"UPDATE_"+t+"_FAILED",function(e,t){var n={isWritting:!1,updateError:t.error,updatedItem:null};if(e.updatedItem&&e.updatedItem[i.keyName]){var r=[].concat(a(e.items));r.splice(o.default.findIndex(r,function(t){return t[i.keyName]==e.updatedItem[i.keyName]}),1,e.updatedItem),n.items=r}return Object.assign({},e,n)}),r(e,"UPDATE_"+t+"_COMPLETED",function(e,t){var n={isWritting:!1,updateError:null,updatedItem:null};if(t.rewrite||i.rewriteOnUpdate){var r=[].concat(a(e.items)),u=t.data;o.default.isArray(u)||(u=[u]),n.items=o.default.unionBy(u,r,i.keyName)}return Object.assign({},e,n)}),r(e,"DESTROY_"+t,function(e,t){var n={isWritting:!0};if(t.data[i.keyName]){var r=[].concat(a(e.items));n.destroyedItem=o.default.find(r,function(e){return e[i.keyName]==t.data[i.keyName]}),n.destroyedItemIndex=o.default.findIndex(r,function(e){return e[i.keyName]==t.data[i.keyName]}),r.splice(n.destroyedItemIndex,1),n.items=r}return Object.assign({},e,n)}),r(e,"DESTROY_"+t+"_FAILED",function(e,t){var n={isWritting:!1,destroyError:t.error,destroyedItem:null,destroyedItemIndex:null};if(e.destroyedItem&&null!=e.destroyedItemIndex){var r=[].concat(a(e.items));r.splice(e.destroyedItemIndex,0,e.destroyedItem),n.items=r}return Object.assign({},e,n)}),r(e,"DESTROY_"+t+"_COMPLETED",function(e,t){return Object.assign({},e,{isWritting:!1,destroyError:null,destroyedItem:null,destroyedItemIndex:null})}),r(e,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[]})}),r(e,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),r(e,"RESET_"+t,function(e,t){return Object.assign({},c)}),e));return u[s.type]?u[s.type](n,s):f[s.type]?f[s.type](n,s):n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t,n,u,i){i=Object.assign({keyName:"id"},i),n||(n={}),u||(u={});var c=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,s=arguments[1],f=Object.assign((n={},r(n,"FIND_"+t,function(e,t){var n=t.data;return o.default.isArray(n)||(n=[n]),Object.assign({},e,{init:!0,items:n})}),r(n,"SYNC_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{init:!0,items:u})}),r(n,"RECEIVE_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{items:u})}),r(n,"CREATE_"+t,function(e,t){return Object.assign({},e,{items:[].concat(a(e.items),[t.data])})}),r(n,"UPDATE_"+t,function(t,n){var r={};if(o.default.isObject(n.data)&&n.data[e.keyName]){var u=[].concat(a(t.items)),i=o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]});u.splice(o.default.findIndex(u,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.items=u}return Object.assign({},t,r)}),r(n,"DESTROY_"+t,function(t,n){var r={};if(n.data[e.keyName]){var u=[].concat(a(t.items));o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]});u.splice(destroyedItemIndex,1),r.items=u}return Object.assign({},t,r)}),r(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[]})}),r(n,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),r(n,"RESET_"+t,function(e,t){return Object.assign({},c)}),n));return u[s.type]?u[s.type](i,s):f[s.type]?f[s.type](i,s):i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i)}])});