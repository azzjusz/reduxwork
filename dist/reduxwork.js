!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.reduxwork=t(require("lodash")):e.reduxwork=t(e._)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){return function(u){if(e.addKeyOnCreate&&"CREATE"==t){var c=e.keyName||"id";r[c]||(r[c]=(new Date).getTime())}return u({type:t?t+"_"+n.toUpperCase():n.toUpperCase(),data:r}),"socket"==e.type?(0,i.default)(e,t,n.toUpperCase(),u,r,a,e):"fetch"==e.type?(0,o.default)(e,t,n.toUpperCase(),u,r,a,e):void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(2),i=r(u),c=n(3),o=r(c)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t,n,r,a,u){if(t&&(t=t.toUpperCase()),e||(e={}),e.eventName||(e.eventName="redux_action_event"),e.socketIoFunction){var i={type:t?t+"_"+n:n};return a&&(i.data=a),new Promise(function(a,c){e.socketIoFunction(e.eventName,i,function(e,i){return e?(r({type:(t?t+"_"+n:n)+"_FAILED",error:e}),c(e)):(r({type:(t?t+"_"+n:n)+"_COMPLETED",data:i}),a(i)),u&&u(e,i),u})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,u){if(t=t.toUpperCase(),e||(e={}),e.fetchFunction)return new Promise(function(c,s){e.fetchFunction((0,o.default)(e,t,n,a,(0,d.default)(e,t)),(0,i.default)(e,a,(0,d.default)(e,t))).then(function(e){return e.json()}).then(function(e){return e.err?(r({type:t+"_"+n.toUpperCase()+"_FAILED",error:e.err}),s(e.err)):(r({type:t+"_"+n.toUpperCase()+"_COMPLETED",data:e}),c(e)),u&&u(e.err,e),u})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(9),i=r(u),c=n(10),o=r(c),s=n(11),d=r(s)},function(e,t,n){"use strict";function r(e,t){var n={};return e.selected&&e.selected[config.keyName]&&(n.selected=_.find(action.data,function(t){return t[config.keyName]==e.selected[config.keyName]})),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(7),u=r(a),i=n(8),c=r(i),o=n(12),s=r(o),d=n(13),f=n(14),l=n(15),y=n(16),p=r(y),m=n(17),E=r(m),_=n(18),v=r(_),A={createAction:u.default,createSocketAction:c.default,createLocalActions:s.default,createSocketActions:d.createSocketActions,createFetchActions:d.createFetchActions,createIoActions:d.createIoActions,createSocketGetAction:f.createSocketGetAction,createFetchGetAction:f.createFetchGetAction,createGetAction:f.createGetAction,createSocketPostAction:l.createSocketPostAction,createFetchPostAction:l.createFetchPostAction,createPostAction:l.createPostAction,createReducer:p.default,createIoReducers:E.default,createLocalReducers:v.default};t.default=A,t.createAction=u.default,t.createSocketAction=c.default,t.createLocalActions=s.default,t.createSocketActions=d.createSocketActions,t.createFetchActions=d.createFetchActions,t.createIoActions=d.createIoActions,t.createSocketGetAction=f.createSocketGetAction,t.createFetchGetAction=f.createFetchGetAction,t.createGetAction=f.createGetAction,t.createSocketPostAction=l.createSocketPostAction,t.createFetchPostAction=l.createFetchPostAction,t.createPostAction=l.createPostAction,t.createReducer=p.default,t.createIoReducers=E.default,t.createLocalReducers=v.default},function(e,t,n){"use strict";function r(e,t){return function(n){var r={type:e};return t&&(r[t]=n),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,u.default)(e,null,t,n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e,t,n){var r=e.fetchOptions||a;return r.method=n,"GET"!=r.method&&(r.body=JSON.stringify(t)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a={credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}},function(e,t,n){"use strict";function r(e,t,n,r,a){var u=e.baseURL;if(e.customUrl?u+=e.customUrl:u+="/"+n.toLowerCase()+"/"+t.toLowerCase(),r&&"GET"==a){var i=!0;u+="/";for(var c in r)i?(u+="?"+c+"="+r[c],i=!1):u+="&"+c+"="+r[c]}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){return e.fetchMethod?e.fetchMethod:e.fetchOptions&&e.fetchOptions.method?e.fetchOptions.method:"GET"==t||"FIND"==t||"SYNC"==t?"GET":"POST"==t||"CREATE"==t?"POST":"UPDATE"==t?"PUT":"DESTROY"==t?"DELETE":"POST"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n;return n={},r(n,"find"+t,function(e,n){return{type:"FIND_"+t.toUpperCase(),data:e}}),r(n,"sync"+t,function(e,n){return{type:"SYNC_"+t.toUpperCase(),data:e}}),r(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(n,"create"+t,function(e){return{type:"CREATE_"+t.toUpperCase(),data:e}}),r(n,"update"+t,function(e){return{type:"UPDATE_"+t.toUpperCase(),data:e}}),r(n,"destroy"+t,function(e){return{type:"DESTROY_"+t.toUpperCase(),data:e}}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n;return e||(e={}),e.type="socket",n={},r(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(n,"find"+t,function(n,r){return(0,o.default)(e,"FIND",t,n,r)}),r(n,"sync"+t,function(n,r){return(0,o.default)(e,"SYNC",t,n,r)}),r(n,"create"+t,function(n,r){return(0,o.default)(e,"CREATE",t,n,r)}),r(n,"update"+t,function(n,r,a){return(0,o.default)(e,"UPDATE",t,n,r)}),r(n,"destroy"+t,function(n,r){return(0,o.default)(e,"DESTROY",t,n,r)}),n}function u(e,t){var n;return e||(e={}),e.type="fetch",n={},r(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(n,"find"+t,function(n,r){return(0,o.default)(e,"FIND",t,n,r)}),r(n,"sync"+t,function(n,r){return(0,o.default)(e,"SYNC",t,n,r)}),r(n,"create"+t,function(n,r){return(0,o.default)(e,"CREATE",t,n,r)}),r(n,"update"+t,function(n,r,a){return(0,o.default)(e,"UPDATE",t,n,r)}),r(n,"destroy"+t,function(n,r){return(0,o.default)(e,"DESTROY",t,n,r)}),n}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketActions=a,t.createFetchActions=u,t.createIoActions=i;var c=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,s.default)(e,"GET",t,params,query,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r,a){return(0,s.default)(e,"GET",t,params,r,a)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketGetAction=a,t.createFetchGetAction=u,t.createGetAction=i;var c=n(1),o=(r(c),n(0)),s=r(o),d=n(2),f=(r(d),n(3));r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,o.default)(e,"POST",t,n,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r){return(0,o.default)(e,"POST",t,n,r)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketPostAction=a,t.createFetchPostAction=u,t.createPostAction=i;var c=n(0),o=r(c),s=n(2),d=(r(s),n(3));r(d)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,a){n||(n={}),a||(a={});var u=Object.assign({},n);return t=i.default.toUpper(i.default.snakeCase(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1],i=Object.assign(r({},"RESET_"+t,function(e,t){return Object.assign({},u)}));return a[n.type]?a[n.type](e,n):i[n.type]?i[n.type](e,n):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),r||(r={});var i=Object.assign({},{init:!1,selected:null,query:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var n,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],f=Object.assign((n={},a(n,"FIND_"+t,function(e,t){var n={isFinding:!0,findError:null};return n.query=t.data&&!o.default.isEmpty(t.data)?t.data:null,o.default.isEqual(n.query,e.query)||(n.items=[]),Object.assign({},e,n)}),a(n,"FIND_"+t+"_FAILED",function(e,t){return Object.assign({},e,{findError:t.error,isFinding:!1})}),a(n,"FIND_"+t+"_COMPLETED",function(e,t){var n=(0,d.default)(e,t.data);return Object.assign({},e,{init:!0,isFinding:!1,findError:null,items:t.data},n)}),a(n,"SYNC_"+t,function(e,t){return Object.assign({},e,{isSyncing:!0,syncError:null})}),a(n,"SYNC_"+t+"_FAILED",function(e,t){return Object.assign({},e,{syncError:t.error,isSyncing:!1})}),a(n,"SYNC_"+t+"_COMPLETED",function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var a=o.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,d.default)(t,a);return Object.assign({},t,{isSyncing:!1,syncError:null,init:!0,items:a},i)}),a(n,"RECEIVE_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var a=o.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,d.default)(t,a);return Object.assign({},t,{items:a},i)}),a(n,"REMOVE_"+t,function(t,n){var r={};if(n.data[e.keyName]){var a=[].concat(u(t.items));a.splice(o.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1),r.items=a}var i=r.items?(0,d.default)(t,r.items):{};return Object.assign({},t,r,i)}),a(n,"CREATE_"+t,function(e,t){var n=Object.assign({},t.data,{_temp:!0});return Object.assign({},e,{isWritting:!0,items:[].concat(u(e.items),[n])})}),a(n,"CREATE_"+t+"_FAILED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,items:r,writeError:n.error})}),a(n,"CREATE_"+t+"_COMPLETED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,writeError:null,items:[].concat(u(r),[n.data])})}),a(n,"UPDATE_"+t,function(t,n){var r={isWritting:!0};if(o.default.isObject(n.data)&&n.data[e.keyName]){var a=[].concat(u(t.items)),i=o.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(o.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.updatedItem=i,r.items=a}return Object.assign({},t,r)}),a(n,"UPDATE_"+t+"_FAILED",function(t,n){var r={isWritting:!1,updateError:n.error,updatedItem:null};if(t.updatedItem&&t.updatedItem[e.keyName]){var a=[].concat(u(t.items));a.splice(o.default.findIndex(a,function(n){return n[e.keyName]==t.updatedItem[e.keyName]}),1,t.updatedItem),r.items=a}return Object.assign({},t,r)}),a(n,"UPDATE_"+t+"_COMPLETED",function(t,n){var r={isWritting:!1,updateError:null,updatedItem:null};if(n.rewrite||e.rewriteOnUpdate){var a=[].concat(u(t.items)),i=n.data;o.default.isArray(i)||(i=[i]),r.items=o.default.unionBy(i,a,e.keyName)}var c=r.items?(0,d.default)(t,r.items):{};return Object.assign({},t,r,c)}),a(n,"DESTROY_"+t,function(t,n){var r={isWritting:!0};if(n.data[e.keyName]){var a=[].concat(u(t.items));r.destroyedItem=o.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]}),r.destroyedItemIndex=o.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),a.splice(r.destroyedItemIndex,1),r.items=a}return Object.assign({},t,r)}),a(n,"DESTROY_"+t+"_FAILED",function(e,t){var n={isWritting:!1,destroyError:t.error,destroyedItem:null,destroyedItemIndex:null};if(e.destroyedItem&&null!=e.destroyedItemIndex){var r=[].concat(u(e.items));r.splice(e.destroyedItemIndex,0,e.destroyedItem),n.items=r}return Object.assign({},e,n)}),a(n,"DESTROY_"+t+"_COMPLETED",function(e,t){var n=(0,d.default)(e,e.items);return Object.assign({},e,{isWritting:!1,destroyError:null,destroyedItem:null,destroyedItemIndex:null},n)}),a(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[],selected:null})}),a(n,"SELECT_"+t,function(t,n){var r=null;return(o.default.isString(n.data)||o.default.isNumber(n.data))&&(r=o.default.find(t.items,function(t){return t[e.keyName]==n.data})),r=o.default.isObject(n.data)&&n.data[e.keyName]?o.default.find(t.items,function(t){return t[e.keyName]==n.data[e.keyName]}):n.data,Object.assign({},t,{selected:r})}),a(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return r[s.type]?r[s.type](c,s):f[s.type]?f[s.type](c,s):c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var c=n(1),o=r(c),s=n(4),d=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),r||(r={});var i=Object.assign({},{init:!1,selected:null,query:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var n,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],f=Object.assign((n={},a(n,"FIND_"+t,function(e,t){var n=t.data;o.default.isArray(n)||(n=[n]);var r=(0,d.default)(e,n);return Object.assign({},e,{init:!0,items:n},r)}),a(n,"SYNC_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var a=o.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,d.default)(t,a);return Object.assign({},t,{init:!0,items:a},i)}),a(n,"RECEIVE_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var a=o.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,d.default)(t,a);return Object.assign({},t,{items:a},i)}),a(n,"CREATE_"+t,function(e,t){return Object.assign({},e,{items:[].concat(u(e.items),[t.data])})}),a(n,"UPDATE_"+t,function(t,n){var r={};if(o.default.isObject(n.data)&&n.data[e.keyName]){var a=[].concat(u(t.items)),i=o.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(o.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.items=a}var c=r.items?(0,d.default)(t,r.items):{};return Object.assign({},t,r,c)}),a(n,"DESTROY_"+t,function(t,n){var r={};if(n.data[e.keyName]){var a=[].concat(u(t.items));o.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(destroyedItemIndex,1),r.items=a}var i=r.items?(0,d.default)(t,r.items):{};return Object.assign({},t,r,i)}),a(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[],selected:null})}),a(n,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),a(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return r[s.type]?r[s.type](c,s):f[s.type]?f[s.type](c,s):c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var c=n(1),o=r(c),s=n(4),d=r(s)}])});