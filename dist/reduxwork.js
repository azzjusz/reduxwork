!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.reduxwork=t(require("lodash")):e.reduxwork=t(e._)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){return function(u){if(e.addKeyOnCreate&&"CREATE"==t){var o=e.keyName||"id";r[o]||(r[o]=(new Date).getTime())}return u({type:t?t+"_"+n.toUpperCase():n.toUpperCase(),data:r}),"socket"==e.type?(0,i.default)(e,t,n.toUpperCase(),u,r,a,e):"fetch"==e.type?(0,c.default)(e,t,n.toUpperCase(),u,r,a,e):void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(3),i=r(u),o=n(1),c=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,u){if(t=t.toUpperCase(),e||(e={}),e.fetchFunction)return new Promise(function(o,s){e.fetchFunction((0,c.default)(e,t,n,a),(0,i.default)(e,t,a)).then(function(e){return e.json()}).then(function(e){return e.err?(r({type:t+"_"+n.toUpperCase()+"_FAILED",error:e.err}),s(e.err)):(r({type:t+"_"+n.toUpperCase()+"_COMPLETED",data:e}),o(e)),u&&u(e.err,e),u})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(10),i=r(u),o=n(11),c=r(o)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t,n,r,a,u){if(t&&(t=t.toUpperCase()),e||(e={}),e.eventName||(e.eventName="redux_action_event"),e.socketIoFunction){var i={type:t?t+"_"+n:n};return a&&(i.data=a),new Promise(function(a,o){e.socketIoFunction(e.eventName,i,function(e,i){return e?(r({type:(t?t+"_"+n:n)+"_FAILED",error:e}),o(e)):(r({type:(t?t+"_"+n:n)+"_COMPLETED",data:i}),a(i)),u&&u(e,i),u})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n,r,u,o){if(r&&"object"!==(void 0===r?"undefined":a(r))){var c=r;r={},r[e.idName]=c}return"function"==typeof u&&(o=u,u=null),function(a){var c={type:t+"_"+n.toUpperCase()};return u&&(c.query=u),r&&(c.params=r),a(c),(0,i.default)(e,t,n.toUpperCase(),a,{params:r,query:u},o)}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var u=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e,t){var n={};return e.selected&&e.selected[config.keyName]&&(n.selected=_.find(action.data,function(t){return t[config.keyName]==e.selected[config.keyName]})),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(8),u=r(a),i=n(9),o=r(i),c=n(12),s=r(c),f=n(13),d=n(14),l=n(15),y=n(16),p=r(y),m=n(17),_=r(m),E=n(18),v=r(E),b={createAction:u.default,createSocketAction:o.default,createLocalActions:s.default,createSocketActions:f.createSocketActions,createFetchActions:f.createFetchActions,createIoActions:f.createIoActions,createSocketGetAction:d.createSocketGetAction,createFetchGetAction:d.createFetchGetAction,createGetAction:d.createGetAction,createSocketPostAction:l.createSocketPostAction,createFetchPostAction:l.createFetchPostAction,createPostAction:l.createPostAction,createReducer:p.default,createIoReducers:_.default,createLocalReducers:v.default};t.default=b,t.createAction=u.default,t.createSocketAction=o.default,t.createLocalActions=s.default,t.createSocketActions=f.createSocketActions,t.createFetchActions=f.createFetchActions,t.createIoActions=f.createIoActions,t.createSocketGetAction=d.createSocketGetAction,t.createFetchGetAction=d.createFetchGetAction,t.createGetAction=d.createGetAction,t.createSocketPostAction=l.createSocketPostAction,t.createFetchPostAction=l.createFetchPostAction,t.createPostAction=l.createPostAction,t.createReducer=p.default,t.createIoReducers=_.default,t.createLocalReducers=v.default},function(e,t,n){"use strict";function r(e,t){return function(n){var r={type:e};return t&&(r[t]=n),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,u.default)(e,null,t,n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e,t,n){var r=e.fetchOptions||a;return r.method="GET"==t||"FIND"==t||"SYNC"==t?"GET":"POST"==t||"CREATE"==t?"POST":"UPDATE"==t?"PUT":"DESTROY"==t?"DELETE":"POST","GET"!=r.method&&(r.body=JSON.stringify(n)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a={credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}},function(e,t,n){"use strict";function r(e,t,n,r){var a=null,u=e.baseURL;if(r.params&&r.params[e.idName]&&(a=r.params[e.idName]),e.customUrl){u+=e.customUrl;for(var i in r.params)u=u.replace("%"+i,r.params[i]);if(r.query){var o=!0;u+="/";for(var c in r.query)o?(u+="?"+c+"="+r.query[c],o=!1):u+="&"+c+"="+r.query[c]}}else if(u+=a?"/"+n.toLowerCase()+"/"+t.toLowerCase()+"/"+a:"/"+n.toLowerCase()+"/"+t.toLowerCase(),r.query){var s=!0;u+="/";for(var c in r.query)s?(u+="?"+c+"="+r.query[c],s=!1):u+="&"+c+"="+r.query[c]}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n;return n={},r(n,"find"+t,function(e,n){return{type:"FIND_"+t.toUpperCase(),data:e}}),r(n,"sync"+t,function(e,n){return{type:"SYNC_"+t.toUpperCase(),data:e}}),r(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(n,"create"+t,function(e){return{type:"CREATE_"+t.toUpperCase(),data:e}}),r(n,"update"+t,function(e){return{type:"UPDATE_"+t.toUpperCase(),data:e}}),r(n,"destroy"+t,function(e){return{type:"DESTROY_"+t.toUpperCase(),data:e}}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n;return e||(e={}),e.type="socket",n={},a(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(n,"find"+t,function(n,r){return(0,d.default)(e,"FIND",t,n,r)}),a(n,"sync"+t,function(n,r){return(0,d.default)(e,"SYNC",t,n,r)}),a(n,"create"+t,function(n,r){return(0,d.default)(e,"CREATE",t,n,r)}),a(n,"update"+t,function(n,r,a){return(0,d.default)(e,"UPDATE",t,n,r)}),a(n,"destroy"+t,function(n,r){return(0,d.default)(e,"DESTROY",t,n,r)}),n}function i(e,t){var n;return e||(e={}),e.type="fetch",n={},a(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(n,"find"+t,function(n,r,a){return(0,s.default)(e,"FIND",t,n,r,a)}),a(n,"sync"+t,function(n,r,a){return(0,s.default)(e,"SYNC",t,n,r,a)}),a(n,"create"+t,function(n,r){return(0,d.default)(e,"CREATE",t,n,r)}),a(n,"update"+t,function(n,r,a){return(0,d.default)(e,"UPDATE",t,n,r)}),a(n,"destroy"+t,function(n,r){return(0,d.default)(e,"DESTROY",t,n,r)}),n}function o(e,t){return"socket"==e.type?u(e,t):"fetch"==e.type?i(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketActions=u,t.createFetchActions=i,t.createIoActions=o;var c=n(4),s=r(c),f=n(0),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,d.default)(e,"GET",t,params,query,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r,a){return(0,s.default)(e,"GET",t,params,r,a)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketGetAction=a,t.createFetchGetAction=u,t.createGetAction=i;var o=n(2),c=(r(o),n(4)),s=r(c),f=n(0),d=r(f),l=n(3),y=(r(l),n(1));r(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,s.default)(e,"POST",t,n,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r){return(0,s.default)(e,"POST",t,n,r)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketPostAction=a,t.createFetchPostAction=u,t.createPostAction=i;var o=n(4),c=(r(o),n(0)),s=r(c),f=n(3),d=(r(f),n(1));r(d)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,a){n||(n={}),a||(a={});var u=Object.assign({},n);return t=i.default.toUpper(i.default.snakeCase(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1],i=Object.assign(r({},"RESET_"+t,function(e,t){return Object.assign({},u)}));return a[n.type]?a[n.type](e,n):i[n.type]?i[n.type](e,n):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),r||(r={});var i=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=c.default.toUpper(c.default.snakeCase(t)),function(){var n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],d=Object.assign((n={},a(n,"FIND_"+t,function(e,t){var n={isFinding:!0,findError:null};return n.query=t.query||null,n.params=t.params||null,c.default.isEqual(n.query,e.query)&&c.default.isEqual(n.params,e.params)||(n.items=[]),Object.assign({},e,n)}),a(n,"FIND_"+t+"_FAILED",function(e,t){return Object.assign({},e,{findError:t.error,isFinding:!1})}),a(n,"FIND_"+t+"_COMPLETED",function(e,t){var n=(0,f.default)(e,t.data);return Object.assign({},e,{init:!0,isFinding:!1,findError:null,items:t.data},n)}),a(n,"SYNC_"+t,function(e,t){return Object.assign({},e,{isSyncing:!0,syncError:null})}),a(n,"SYNC_"+t+"_FAILED",function(e,t){return Object.assign({},e,{syncError:t.error,isSyncing:!1})}),a(n,"SYNC_"+t+"_COMPLETED",function(t,n){var r=n.data;c.default.isArray(r)||(r=[r]);var a=c.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,f.default)(t,a);return Object.assign({},t,{isSyncing:!1,syncError:null,init:!0,items:a},i)}),a(n,"RECEIVE_"+t,function(t,n){var r=n.data;c.default.isArray(r)||(r=[r]);var a=c.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,f.default)(t,a);return Object.assign({},t,{items:a},i)}),a(n,"REMOVE_"+t,function(t,n){var r={};if(n.data[e.keyName]){var a=[].concat(u(t.items));a.splice(c.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1),r.items=a}var i=r.items?(0,f.default)(t,r.items):{};return Object.assign({},t,r,i)}),a(n,"CREATE_"+t,function(e,t){var n=Object.assign({},t.data,{_temp:!0});return Object.assign({},e,{isWritting:!0,items:[].concat(u(e.items),[n])})}),a(n,"CREATE_"+t+"_FAILED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,items:r,writeError:n.error})}),a(n,"CREATE_"+t+"_COMPLETED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,writeError:null,items:[].concat(u(r),[n.data])})}),a(n,"UPDATE_"+t,function(t,n){var r={isWritting:!0};if(c.default.isObject(n.data)&&n.data[e.keyName]){var a=[].concat(u(t.items)),i=c.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(c.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.updatedItem=i,r.items=a}return Object.assign({},t,r)}),a(n,"UPDATE_"+t+"_FAILED",function(t,n){var r={isWritting:!1,updateError:n.error,updatedItem:null};if(t.updatedItem&&t.updatedItem[e.keyName]){var a=[].concat(u(t.items));a.splice(c.default.findIndex(a,function(n){return n[e.keyName]==t.updatedItem[e.keyName]}),1,t.updatedItem),r.items=a}return Object.assign({},t,r)}),a(n,"UPDATE_"+t+"_COMPLETED",function(t,n){var r={isWritting:!1,updateError:null,updatedItem:null};if(n.rewrite||e.rewriteOnUpdate){var a=[].concat(u(t.items)),i=n.data;c.default.isArray(i)||(i=[i]),r.items=c.default.unionBy(i,a,e.keyName)}var o=r.items?(0,f.default)(t,r.items):{};return Object.assign({},t,r,o)}),a(n,"DESTROY_"+t,function(t,n){var r={isWritting:!0};if(n.data[e.keyName]){var a=[].concat(u(t.items));r.destroyedItem=c.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]}),r.destroyedItemIndex=c.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),a.splice(r.destroyedItemIndex,1),r.items=a}return Object.assign({},t,r)}),a(n,"DESTROY_"+t+"_FAILED",function(e,t){var n={isWritting:!1,destroyError:t.error,destroyedItem:null,destroyedItemIndex:null};if(e.destroyedItem&&null!=e.destroyedItemIndex){var r=[].concat(u(e.items));r.splice(e.destroyedItemIndex,0,e.destroyedItem),n.items=r}return Object.assign({},e,n)}),a(n,"DESTROY_"+t+"_COMPLETED",function(e,t){var n=(0,f.default)(e,e.items);return Object.assign({},e,{isWritting:!1,destroyError:null,destroyedItem:null,destroyedItemIndex:null},n)}),a(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[],selected:null})}),a(n,"SELECT_"+t,function(t,n){var r=null;return(c.default.isString(n.data)||c.default.isNumber(n.data))&&(r=c.default.find(t.items,function(t){return t[e.keyName]==n.data})),r=c.default.isObject(n.data)&&n.data[e.keyName]?c.default.find(t.items,function(t){return t[e.keyName]==n.data[e.keyName]}):n.data,Object.assign({},t,{selected:r})}),a(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return r[s.type]?r[s.type](o,s):d[s.type]?d[s.type](o,s):o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(2),c=r(o),s=n(5),f=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),r||(r={});var i=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=c.default.toUpper(c.default.snakeCase(t)),function(){var n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],d=Object.assign((n={},a(n,"FIND_"+t,function(e,t){var n=t.data;c.default.isArray(n)||(n=[n]);var r=(0,f.default)(e,n);return Object.assign({},e,{init:!0,items:n},r)}),a(n,"SYNC_"+t,function(t,n){var r=n.data;c.default.isArray(r)||(r=[r]);var a=c.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,f.default)(t,a);return Object.assign({},t,{init:!0,items:a},i)}),a(n,"RECEIVE_"+t,function(t,n){var r=n.data;c.default.isArray(r)||(r=[r]);var a=c.default.unionBy(r,[].concat(u(t.items)),e.keyName),i=(0,f.default)(t,a);return Object.assign({},t,{items:a},i)}),a(n,"CREATE_"+t,function(e,t){return Object.assign({},e,{items:[].concat(u(e.items),[t.data])})}),a(n,"UPDATE_"+t,function(t,n){var r={};if(c.default.isObject(n.data)&&n.data[e.keyName]){var a=[].concat(u(t.items)),i=c.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(c.default.findIndex(a,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.items=a}var o=r.items?(0,f.default)(t,r.items):{};return Object.assign({},t,r,o)}),a(n,"DESTROY_"+t,function(t,n){var r={};if(n.data[e.keyName]){var a=[].concat(u(t.items));c.default.find(a,function(t){return t[e.keyName]==n.data[e.keyName]});a.splice(destroyedItemIndex,1),r.items=a}var i=r.items?(0,f.default)(t,r.items):{};return Object.assign({},t,r,i)}),a(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[],selected:null})}),a(n,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),a(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return r[s.type]?r[s.type](o,s):d[s.type]?d[s.type](o,s):o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(2),c=r(o),s=n(5),f=r(s)}])});