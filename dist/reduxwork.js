!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports.reduxwork=t(require("lodash")):e.reduxwork=t(e._)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){return function(u){if(e.addKeyOnCreate&&"CREATE"==t){var o=e.keyName||"id";r[o]||(r[o]=(new Date).getTime())}return u({type:t?t+"_"+n.toUpperCase():n.toUpperCase(),data:r}),"socket"==e.type?(0,i.default)(e,t,n.toUpperCase(),u,r,a,e):"fetch"==e.type?(0,c.default)(e,t,n.toUpperCase(),u,r,a,e):void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(3),i=r(u),o=n(1),c=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,u){if(t=t.toUpperCase(),e||(e={}),e.fetchFunction)return new Promise(function(o,s){e.fetchFunction((0,c.default)(e,t,n,a),(0,i.default)(e,t,a)).then(function(e){return e.json()}).then(function(e){return e.err?(r({type:t+"_"+n.toUpperCase()+"_FAILED",error:e.err}),s(e.err)):(r({type:t+"_"+n.toUpperCase()+"_COMPLETED",data:e}),o(e)),u&&u(e.err,e),u})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(9),i=r(u),o=n(10),c=r(o)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t,n,r,a,u){if(t&&(t=t.toUpperCase()),e||(e={}),e.eventName||(e.eventName="redux_action_event"),e.socketIoFunction){var i={type:t?t+"_"+n:n};return a&&(i.data=a),new Promise(function(a,o){e.socketIoFunction(e.eventName,i,function(e,i){return e?(r({type:(t?t+"_"+n:n)+"_FAILED",error:e}),o(e)):(r({type:(t?t+"_"+n:n)+"_COMPLETED",data:i}),a(i)),u&&u(e,i),u})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n,r,u,o){if(r&&"object"!==(void 0===r?"undefined":a(r))){var c=r;r={},r[e.idName]=c}return"function"==typeof u&&(o=u,u=null),function(a){var c={type:t+"_"+n.toUpperCase()};return u&&(c.query=u),r&&(c.params=r),a(c),(0,i.default)(e,t,n.toUpperCase(),a,{params:r,query:u},o)}}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var u=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(7),u=r(a),i=n(8),o=r(i),c=n(11),s=r(c),f=n(12),d=n(13),l=n(14),y=n(15),p=r(y),m=n(16),_=r(m),E=n(17),v=r(E),A={createAction:u.default,createSocketAction:o.default,createLocalActions:s.default,createSocketActions:f.createSocketActions,createFetchActions:f.createFetchActions,createIoActions:f.createIoActions,createSocketGetAction:d.createSocketGetAction,createFetchGetAction:d.createFetchGetAction,createGetAction:d.createGetAction,createSocketPostAction:l.createSocketPostAction,createFetchPostAction:l.createFetchPostAction,createPostAction:l.createPostAction,createReducer:p.default,createIoReducers:_.default,createLocalReducers:v.default};t.default=A,t.createAction=u.default,t.createSocketAction=o.default,t.createLocalActions=s.default,t.createSocketActions=f.createSocketActions,t.createFetchActions=f.createFetchActions,t.createIoActions=f.createIoActions,t.createSocketGetAction=d.createSocketGetAction,t.createFetchGetAction=d.createFetchGetAction,t.createGetAction=d.createGetAction,t.createSocketPostAction=l.createSocketPostAction,t.createFetchPostAction=l.createFetchPostAction,t.createPostAction=l.createPostAction,t.createReducer=p.default,t.createIoReducers=_.default,t.createLocalReducers=v.default},function(e,t,n){"use strict";function r(e,t){return function(n){var r={type:e};return t&&(r[t]=n),r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,u.default)(e,null,t,n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e,t,n){var r=e.fetchOptions||a;return r.method="GET"==t||"FIND"==t||"SYNC"==t?"GET":"POST"==t||"CREATE"==t?"POST":"UPDATE"==t?"PUT":"DESTROY"==t?"DELETE":"POST","GET"!=r.method&&(r.body=JSON.stringify(n)),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a={credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}},function(e,t,n){"use strict";function r(e,t,n,r){var a=null,u=e.baseURL;if(r.params&&r.params[e.idName]&&(a=r.params[e.idName]),e.customUrl){u+=e.customUrl;for(var i in r.params)u=u.replace("%"+i,r.params[i]);if(r.query){var o=!0;u+="/";for(var c in r.query)o?(u+="?"+c+"="+r.query[c],o=!1):u+="&"+c+"="+r.query[c]}}else if(u+=a?"/"+n.toLowerCase()+"/"+t.toLowerCase()+"/"+a:"/"+n.toLowerCase()+"/"+t.toLowerCase(),r.query){var s=!0;u+="/";for(var c in r.query)s?(u+="?"+c+"="+r.query[c],s=!1):u+="&"+c+"="+r.query[c]}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n;return n={},r(n,"find"+t,function(e,n){return{type:"FIND_"+t.toUpperCase(),data:e}}),r(n,"sync"+t,function(e,n){return{type:"SYNC_"+t.toUpperCase(),data:e}}),r(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),r(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),r(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),r(n,"create"+t,function(e){return{type:"CREATE_"+t.toUpperCase(),data:e}}),r(n,"update"+t,function(e){return{type:"UPDATE_"+t.toUpperCase(),data:e}}),r(n,"destroy"+t,function(e){return{type:"DESTROY_"+t.toUpperCase(),data:e}}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n;return e||(e={}),e.type="socket",n={},a(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(n,"find"+t,function(n,r){return(0,d.default)(e,"FIND",t,n,r)}),a(n,"sync"+t,function(n,r){return(0,d.default)(e,"SYNC",t,n,r)}),a(n,"create"+t,function(n,r){return(0,d.default)(e,"CREATE",t,n,r)}),a(n,"update"+t,function(n,r,a){return(0,d.default)(e,"UPDATE",t,n,r)}),a(n,"destroy"+t,function(n,r){return(0,d.default)(e,"DESTROY",t,n,r)}),n}function i(e,t){var n;return e||(e={}),e.type="fetch",n={},a(n,"clear"+t,function(){return{type:"CLEAR_"+t.toUpperCase()}}),a(n,"reset"+t,function(){return{type:"RESET_"+t.toUpperCase()}}),a(n,"select"+t,function(e){return{type:"SELECT_"+t.toUpperCase(),data:e}}),a(n,"find"+t,function(n,r,a){return(0,s.default)(e,"FIND",t,n,r,a)}),a(n,"sync"+t,function(n,r,a){return(0,s.default)(e,"SYNC",t,n,r,a)}),a(n,"create"+t,function(n,r){return(0,d.default)(e,"CREATE",t,n,r)}),a(n,"update"+t,function(n,r,a){return(0,d.default)(e,"UPDATE",t,n,r)}),a(n,"destroy"+t,function(n,r){return(0,d.default)(e,"DESTROY",t,n,r)}),n}function o(e,t){return"socket"==e.type?u(e,t):"fetch"==e.type?i(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketActions=u,t.createFetchActions=i,t.createIoActions=o;var c=n(4),s=r(c),f=n(0),d=r(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,d.default)(e,"GET",t,params,query,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r,a){return(0,s.default)(e,"GET",t,params,r,a)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketGetAction=a,t.createFetchGetAction=u,t.createGetAction=i;var o=n(2),c=(r(o),n(4)),s=r(c),f=n(0),d=r(f),l=n(3),y=(r(l),n(1));r(y)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e||(e={}),e.type="socket",function(n,r){return(0,s.default)(e,"POST",t,n,r)}}function u(e,t){return e||(e={}),e.type="fetch",function(n,r){return(0,s.default)(e,"POST",t,n,r)}}function i(e,t){return"socket"==e.type?a(e,t):"fetch"==e.type?u(e,t):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createSocketPostAction=a,t.createFetchPostAction=u,t.createPostAction=i;var o=n(4),c=(r(o),n(0)),s=r(c),f=n(3),d=(r(f),n(1));r(d)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,a){n||(n={}),a||(a={});var u=Object.assign({},n);return t=i.default.toUpper(i.default.snakeCase(t)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,n=arguments[1],i=Object.assign(r({},"RESET_"+t,function(e,t){return Object.assign({},u)}));return a[n.type]?a[n.type](e,n):i[n.type]?i[n.type](e,n):e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t,n,u){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),u||(u={});var i=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var n,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],f=Object.assign((n={},r(n,"FIND_"+t,function(e,t){var n={isFinding:!0,findError:null};return n.query=t.query||null,n.params=t.params||null,o.default.isEqual(n.query,e.query)&&o.default.isEqual(n.params,e.params)||(n.items=[]),Object.assign({},e,n)}),r(n,"FIND_"+t+"_FAILED",function(e,t){return Object.assign({},e,{findError:t.error,isFinding:!1})}),r(n,"FIND_"+t+"_COMPLETED",function(e,t){return Object.assign({},e,{init:!0,isFinding:!1,findError:null,items:t.data})}),r(n,"SYNC_"+t,function(e,t){return Object.assign({},e,{isSyncing:!0,syncError:null})}),r(n,"SYNC_"+t+"_FAILED",function(e,t){return Object.assign({},e,{syncError:t.error,isSyncing:!1})}),r(n,"SYNC_"+t+"_COMPLETED",function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{isSyncing:!1,syncError:null,init:!0,items:u})}),r(n,"RECEIVE_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{items:u})}),r(n,"REMOVE_"+t,function(t,n){var r={};if(n.data[e.keyName]){var u=[].concat(a(t.items));u.splice(o.default.findIndex(u,function(t){return t[e.keyName]==n.data[e.keyName]}),1),r.items=u}return Object.assign({},t,r)}),r(n,"CREATE_"+t,function(e,t){var n=Object.assign({},t.data,{_temp:!0});return Object.assign({},e,{isWritting:!0,items:[].concat(a(e.items),[n])})}),r(n,"CREATE_"+t+"_FAILED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,items:r,writeError:n.error})}),r(n,"CREATE_"+t+"_COMPLETED",function(t,n){var r=t.items.filter(function(t){return t[e.keyName]!==n.tempId});return Object.assign({},t,{isWritting:!1,writeError:null,items:[].concat(a(r),[n.data])})}),r(n,"UPDATE_"+t,function(t,n){var r={isWritting:!0};if(o.default.isObject(n.data)&&n.data[e.keyName]){var u=[].concat(a(t.items)),i=o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]});u.splice(o.default.findIndex(u,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.updatedItem=i,r.items=u}return Object.assign({},t,r)}),r(n,"UPDATE_"+t+"_FAILED",function(t,n){var r={isWritting:!1,updateError:n.error,updatedItem:null};if(t.updatedItem&&t.updatedItem[e.keyName]){var u=[].concat(a(t.items));u.splice(o.default.findIndex(u,function(n){return n[e.keyName]==t.updatedItem[e.keyName]}),1,t.updatedItem),r.items=u}return Object.assign({},t,r)}),r(n,"UPDATE_"+t+"_COMPLETED",function(t,n){var r={isWritting:!1,updateError:null,updatedItem:null};if(n.rewrite||e.rewriteOnUpdate){var u=[].concat(a(t.items)),i=n.data;o.default.isArray(i)||(i=[i]),r.items=o.default.unionBy(i,u,e.keyName)}return Object.assign({},t,r)}),r(n,"DESTROY_"+t,function(t,n){var r={isWritting:!0};if(n.data[e.keyName]){var u=[].concat(a(t.items));r.destroyedItem=o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]}),r.destroyedItemIndex=o.default.findIndex(u,function(t){return t[e.keyName]==n.data[e.keyName]}),u.splice(r.destroyedItemIndex,1),r.items=u}return Object.assign({},t,r)}),r(n,"DESTROY_"+t+"_FAILED",function(e,t){var n={isWritting:!1,destroyError:t.error,destroyedItem:null,destroyedItemIndex:null};if(e.destroyedItem&&null!=e.destroyedItemIndex){var r=[].concat(a(e.items));r.splice(e.destroyedItemIndex,0,e.destroyedItem),n.items=r}return Object.assign({},e,n)}),r(n,"DESTROY_"+t+"_COMPLETED",function(e,t){return Object.assign({},e,{isWritting:!1,destroyError:null,destroyedItem:null,destroyedItemIndex:null})}),r(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[]})}),r(n,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),r(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return u[s.type]?u[s.type](c,s):f[s.type]?f[s.type](c,s):c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t,n,u){e||(e={}),e.keyName||(e.keyName="id"),n||(n={}),u||(u={});var i=Object.assign({},{init:!1,selected:null,query:null,params:null,isFinding:!1,isSyncing:!1,isWritting:!1,syncError:null,findError:null,writeError:null,updateError:null,destroyError:null,error:null,updatedItem:null,destroyedItem:null,destroyedItemIndex:null,items:[]},n);return t=o.default.toUpper(o.default.snakeCase(t)),function(){var n,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments[1],f=Object.assign((n={},r(n,"FIND_"+t,function(e,t){var n=t.data;return o.default.isArray(n)||(n=[n]),Object.assign({},e,{init:!0,items:n})}),r(n,"SYNC_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{init:!0,items:u})}),r(n,"RECEIVE_"+t,function(t,n){var r=n.data;o.default.isArray(r)||(r=[r]);var u=o.default.unionBy(r,[].concat(a(t.items)),e.keyName);return Object.assign({},t,{items:u})}),r(n,"CREATE_"+t,function(e,t){return Object.assign({},e,{items:[].concat(a(e.items),[t.data])})}),r(n,"UPDATE_"+t,function(t,n){var r={};if(o.default.isObject(n.data)&&n.data[e.keyName]){var u=[].concat(a(t.items)),i=o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]});u.splice(o.default.findIndex(u,function(t){return t[e.keyName]==n.data[e.keyName]}),1,Object.assign({},i,n.data)),r.items=u}return Object.assign({},t,r)}),r(n,"DESTROY_"+t,function(t,n){var r={};if(n.data[e.keyName]){var u=[].concat(a(t.items));o.default.find(u,function(t){return t[e.keyName]==n.data[e.keyName]});u.splice(destroyedItemIndex,1),r.items=u}return Object.assign({},t,r)}),r(n,"CLEAR_"+t,function(e,t){return Object.assign({},e,{items:[]})}),r(n,"SELECT_"+t,function(e,t){return Object.assign({},e,{selected:t.data})}),r(n,"RESET_"+t,function(e,t){return Object.assign({},i)}),n));return u[s.type]?u[s.type](c,s):f[s.type]?f[s.type](c,s):c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=n(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i)}])});