"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _bluebird = _interopRequireDefault(require("bluebird"));var _fieldsOperations = require("../lib/fieldsOperations");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

var dispatchAction = function dispatchAction(options, action, dispatchMethod) {var
  validationHook = options.validationHook,actionInject = options.actionInject;
  return new _bluebird.default(function (resolve, reject) {
    if (validationHook) {
      var validationAction = actionInject({
        type: action.type,
        payload: (0, _fieldsOperations.parseVirtualData)(action, options) });

      var validationError = validationHook(validationAction);
      if (validationError)
      return reject(validationError);
    }

    return dispatchMethod(resolve, reject);
  });
};var _default =

dispatchAction;exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9kaXNwYXRjaC9kaXNwYXRjaEFjdGlvbi5qcyJdLCJuYW1lcyI6WyJkaXNwYXRjaEFjdGlvbiIsIm9wdGlvbnMiLCJhY3Rpb24iLCJkaXNwYXRjaE1ldGhvZCIsInZhbGlkYXRpb25Ib29rIiwiYWN0aW9uSW5qZWN0IiwicmVzb2x2ZSIsInJlamVjdCIsInZhbGlkYXRpb25BY3Rpb24iLCJ0eXBlIiwicGF5bG9hZCIsInZhbGlkYXRpb25FcnJvciJdLCJtYXBwaW5ncyI6ImdLQUFBLDJEOztBQUVBLElBQU1BLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQWtCQyxjQUFsQixFQUFxQztBQUNsREMsRUFBQUEsY0FEa0QsR0FDakJILE9BRGlCLENBQ2xERyxjQURrRCxDQUNsQ0MsWUFEa0MsR0FDakJKLE9BRGlCLENBQ2xDSSxZQURrQztBQUUxRCxTQUFPLHNCQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxRQUFJSCxjQUFKLEVBQW9CO0FBQ2xCLFVBQUlJLGdCQUFnQixHQUFHSCxZQUFZLENBQUM7QUFDbENJLFFBQUFBLElBQUksRUFBRVAsTUFBTSxDQUFDTyxJQURxQjtBQUVsQ0MsUUFBQUEsT0FBTyxFQUFFLHdDQUFpQlIsTUFBakIsRUFBeUJELE9BQXpCLENBRnlCLEVBQUQsQ0FBbkM7O0FBSUEsVUFBSVUsZUFBZSxHQUFHUCxjQUFjLENBQUNJLGdCQUFELENBQXBDO0FBQ0EsVUFBSUcsZUFBSjtBQUNFLGFBQU9KLE1BQU0sQ0FBQ0ksZUFBRCxDQUFiO0FBQ0g7O0FBRUQsV0FBT1IsY0FBYyxDQUFDRyxPQUFELEVBQVVDLE1BQVYsQ0FBckI7QUFDRCxHQVpNLENBQVA7QUFhRCxDQWZELEM7O0FBaUJlUCxjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VWaXJ0dWFsRGF0YSB9IGZyb20gJy4uL2xpYi9maWVsZHNPcGVyYXRpb25zJztcclxuXHJcbmNvbnN0IGRpc3BhdGNoQWN0aW9uID0gKG9wdGlvbnMsIGFjdGlvbiwgZGlzcGF0Y2hNZXRob2QpID0+IHtcclxuICBjb25zdCB7IHZhbGlkYXRpb25Ib29rLCBhY3Rpb25JbmplY3QgfSA9IG9wdGlvbnM7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmICh2YWxpZGF0aW9uSG9vaykge1xyXG4gICAgICBsZXQgdmFsaWRhdGlvbkFjdGlvbiA9IGFjdGlvbkluamVjdCh7XHJcbiAgICAgICAgdHlwZTogYWN0aW9uLnR5cGUsXHJcbiAgICAgICAgcGF5bG9hZDogcGFyc2VWaXJ0dWFsRGF0YShhY3Rpb24sIG9wdGlvbnMpXHJcbiAgICAgIH0pO1xyXG4gICAgICBsZXQgdmFsaWRhdGlvbkVycm9yID0gdmFsaWRhdGlvbkhvb2sodmFsaWRhdGlvbkFjdGlvbik7XHJcbiAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIHJlamVjdCh2YWxpZGF0aW9uRXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkaXNwYXRjaE1ldGhvZChyZXNvbHZlLCByZWplY3QpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGlzcGF0Y2hBY3Rpb247Il19