"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _dispatchAction = _interopRequireDefault(require("./dispatchAction"));
var _fieldsOperations = require("../lib/fieldsOperations");
var _constants = require("../lib/constants");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

var dispatchToSocket = function dispatchToSocket(options, socket, action) {var
  socketEventName = options.socketEventName,actionInject = options.actionInject;

  if (!socket)
  throw new Error('Reduxwork: socket is not configured.');

  return (0, _dispatchAction.default)(options, action, function (resolve, reject) {
    var socketAction = actionInject({
      type: action.type,
      data: (0, _fieldsOperations.parseVirtualData)(action, options) });

    socket.emit(socketEventName, socketAction, function (error, data) {
      if (error)
      return reject({
        transport: _constants.TransportMethodEnum.SOCKET,
        error: error });

      return resolve(data);
    });
  });
};var _default =

dispatchToSocket;exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9kaXNwYXRjaC9kaXNwYXRjaFRvU29ja2V0LmpzIl0sIm5hbWVzIjpbImRpc3BhdGNoVG9Tb2NrZXQiLCJvcHRpb25zIiwic29ja2V0IiwiYWN0aW9uIiwic29ja2V0RXZlbnROYW1lIiwiYWN0aW9uSW5qZWN0IiwiRXJyb3IiLCJyZXNvbHZlIiwicmVqZWN0Iiwic29ja2V0QWN0aW9uIiwidHlwZSIsImRhdGEiLCJlbWl0IiwiZXJyb3IiLCJ0cmFuc3BvcnQiLCJUcmFuc3BvcnRNZXRob2RFbnVtIiwiU09DS0VUIl0sIm1hcHBpbmdzIjoib0dBQUE7QUFDQTtBQUNBLDZDOztBQUVBLElBQU1BLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQWtCQyxNQUFsQixFQUE2QjtBQUM1Q0MsRUFBQUEsZUFENEMsR0FDVkgsT0FEVSxDQUM1Q0csZUFENEMsQ0FDM0JDLFlBRDJCLEdBQ1ZKLE9BRFUsQ0FDM0JJLFlBRDJCOztBQUdwRCxNQUFJLENBQUNILE1BQUw7QUFDRSxRQUFNLElBQUlJLEtBQUosQ0FBVSxzQ0FBVixDQUFOOztBQUVGLFNBQU8sNkJBQWVMLE9BQWYsRUFBd0JFLE1BQXhCLEVBQWdDLFVBQUNJLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUMxRCxRQUFNQyxZQUFZLEdBQUdKLFlBQVksQ0FBQztBQUNoQ0ssTUFBQUEsSUFBSSxFQUFFUCxNQUFNLENBQUNPLElBRG1CO0FBRWhDQyxNQUFBQSxJQUFJLEVBQUUsd0NBQWlCUixNQUFqQixFQUF5QkYsT0FBekIsQ0FGMEIsRUFBRCxDQUFqQzs7QUFJQUMsSUFBQUEsTUFBTSxDQUFDVSxJQUFQLENBQVlSLGVBQVosRUFBNkJLLFlBQTdCLEVBQTJDLFVBQUNJLEtBQUQsRUFBUUYsSUFBUixFQUFpQjtBQUMxRCxVQUFJRSxLQUFKO0FBQ0UsYUFBT0wsTUFBTSxDQUFDO0FBQ1pNLFFBQUFBLFNBQVMsRUFBRUMsK0JBQW9CQyxNQURuQjtBQUVaSCxRQUFBQSxLQUFLLEVBQUxBLEtBRlksRUFBRCxDQUFiOztBQUlGLGFBQU9OLE9BQU8sQ0FBQ0ksSUFBRCxDQUFkO0FBQ0QsS0FQRDtBQVFELEdBYk0sQ0FBUDtBQWNELENBcEJELEM7O0FBc0JlWCxnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkaXNwYXRjaEFjdGlvbiBmcm9tICcuL2Rpc3BhdGNoQWN0aW9uJztcclxuaW1wb3J0IHsgcGFyc2VWaXJ0dWFsRGF0YSB9IGZyb20gJy4uL2xpYi9maWVsZHNPcGVyYXRpb25zJztcclxuaW1wb3J0IHsgVHJhbnNwb3J0TWV0aG9kRW51bSB9IGZyb20gJy4uL2xpYi9jb25zdGFudHMnO1xyXG5cclxuY29uc3QgZGlzcGF0Y2hUb1NvY2tldCA9IChvcHRpb25zLCBzb2NrZXQsIGFjdGlvbikgPT4ge1xyXG4gIGNvbnN0IHsgc29ja2V0RXZlbnROYW1lLCBhY3Rpb25JbmplY3QgfSA9IG9wdGlvbnM7XHJcblxyXG4gIGlmICghc29ja2V0KVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1eHdvcms6IHNvY2tldCBpcyBub3QgY29uZmlndXJlZC4nKTtcclxuXHJcbiAgcmV0dXJuIGRpc3BhdGNoQWN0aW9uKG9wdGlvbnMsIGFjdGlvbiwgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3Qgc29ja2V0QWN0aW9uID0gYWN0aW9uSW5qZWN0KHtcclxuICAgICAgdHlwZTogYWN0aW9uLnR5cGUsXHJcbiAgICAgIGRhdGE6IHBhcnNlVmlydHVhbERhdGEoYWN0aW9uLCBvcHRpb25zKVxyXG4gICAgfSk7XHJcbiAgICBzb2NrZXQuZW1pdChzb2NrZXRFdmVudE5hbWUsIHNvY2tldEFjdGlvbiwgKGVycm9yLCBkYXRhKSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcilcclxuICAgICAgICByZXR1cm4gcmVqZWN0KHtcclxuICAgICAgICAgIHRyYW5zcG9ydDogVHJhbnNwb3J0TWV0aG9kRW51bS5TT0NLRVQsXHJcbiAgICAgICAgICBlcnJvclxyXG4gICAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVzb2x2ZShkYXRhKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGlzcGF0Y2hUb1NvY2tldDsiXX0=