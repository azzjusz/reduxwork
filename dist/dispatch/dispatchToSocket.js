"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _dispatchAction = _interopRequireDefault(require("./dispatchAction"));
var _fieldsOperations = require("../lib/fieldsOperations");
var _constants = require("../lib/constants");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

var dispatchToSocket = function dispatchToSocket(options, action) {var
  socket = options.socket,socketEventName = options.socketEventName,actionInject = options.actionInject;

  if (!socket)
  throw new Error('Reduxwork: socket is not configured.');

  return (0, _dispatchAction.default)(options, action, function (resolve, reject) {
    var socketAction = actionInject({
      type: action.type,
      data: (0, _fieldsOperations.parseVirtualData)(action, options) });

    socket.emit(socketEventName, socketAction, function (error, data) {
      if (error)
      return reject({
        transport: _constants.TransportMethodEnum.SOCKET,
        error: error });

      return resolve(data);
    });
  });
};var _default =

dispatchToSocket;exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9kaXNwYXRjaC9kaXNwYXRjaFRvU29ja2V0LmpzIl0sIm5hbWVzIjpbImRpc3BhdGNoVG9Tb2NrZXQiLCJvcHRpb25zIiwiYWN0aW9uIiwic29ja2V0Iiwic29ja2V0RXZlbnROYW1lIiwiYWN0aW9uSW5qZWN0IiwiRXJyb3IiLCJyZXNvbHZlIiwicmVqZWN0Iiwic29ja2V0QWN0aW9uIiwidHlwZSIsImRhdGEiLCJlbWl0IiwiZXJyb3IiLCJ0cmFuc3BvcnQiLCJUcmFuc3BvcnRNZXRob2RFbnVtIiwiU09DS0VUIl0sIm1hcHBpbmdzIjoib0dBQUE7QUFDQTtBQUNBLDZDOztBQUVBLElBQU1BLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQ3BDQyxFQUFBQSxNQURvQyxHQUNNRixPQUROLENBQ3BDRSxNQURvQyxDQUM1QkMsZUFENEIsR0FDTUgsT0FETixDQUM1QkcsZUFENEIsQ0FDWEMsWUFEVyxHQUNNSixPQUROLENBQ1hJLFlBRFc7O0FBRzVDLE1BQUksQ0FBQ0YsTUFBTDtBQUNFLFFBQU0sSUFBSUcsS0FBSixDQUFVLHNDQUFWLENBQU47O0FBRUYsU0FBTyw2QkFBZUwsT0FBZixFQUF3QkMsTUFBeEIsRUFBZ0MsVUFBQ0ssT0FBRCxFQUFVQyxNQUFWLEVBQXFCO0FBQzFELFFBQU1DLFlBQVksR0FBR0osWUFBWSxDQUFDO0FBQ2hDSyxNQUFBQSxJQUFJLEVBQUVSLE1BQU0sQ0FBQ1EsSUFEbUI7QUFFaENDLE1BQUFBLElBQUksRUFBRSx3Q0FBaUJULE1BQWpCLEVBQXlCRCxPQUF6QixDQUYwQixFQUFELENBQWpDOztBQUlBRSxJQUFBQSxNQUFNLENBQUNTLElBQVAsQ0FBWVIsZUFBWixFQUE2QkssWUFBN0IsRUFBMkMsVUFBQ0ksS0FBRCxFQUFRRixJQUFSLEVBQWlCO0FBQzFELFVBQUlFLEtBQUo7QUFDRSxhQUFPTCxNQUFNLENBQUM7QUFDWk0sUUFBQUEsU0FBUyxFQUFFQywrQkFBb0JDLE1BRG5CO0FBRVpILFFBQUFBLEtBQUssRUFBTEEsS0FGWSxFQUFELENBQWI7O0FBSUYsYUFBT04sT0FBTyxDQUFDSSxJQUFELENBQWQ7QUFDRCxLQVBEO0FBUUQsR0FiTSxDQUFQO0FBY0QsQ0FwQkQsQzs7QUFzQmVYLGdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRpc3BhdGNoQWN0aW9uIGZyb20gJy4vZGlzcGF0Y2hBY3Rpb24nO1xyXG5pbXBvcnQgeyBwYXJzZVZpcnR1YWxEYXRhIH0gZnJvbSAnLi4vbGliL2ZpZWxkc09wZXJhdGlvbnMnO1xyXG5pbXBvcnQgeyBUcmFuc3BvcnRNZXRob2RFbnVtIH0gZnJvbSAnLi4vbGliL2NvbnN0YW50cyc7XHJcblxyXG5jb25zdCBkaXNwYXRjaFRvU29ja2V0ID0gKG9wdGlvbnMsIGFjdGlvbikgPT4ge1xyXG4gIGNvbnN0IHsgc29ja2V0LCBzb2NrZXRFdmVudE5hbWUsIGFjdGlvbkluamVjdCB9ID0gb3B0aW9ucztcclxuXHJcbiAgaWYgKCFzb2NrZXQpXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHV4d29yazogc29ja2V0IGlzIG5vdCBjb25maWd1cmVkLicpO1xyXG5cclxuICByZXR1cm4gZGlzcGF0Y2hBY3Rpb24ob3B0aW9ucywgYWN0aW9uLCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBzb2NrZXRBY3Rpb24gPSBhY3Rpb25JbmplY3Qoe1xyXG4gICAgICB0eXBlOiBhY3Rpb24udHlwZSxcclxuICAgICAgZGF0YTogcGFyc2VWaXJ0dWFsRGF0YShhY3Rpb24sIG9wdGlvbnMpXHJcbiAgICB9KTtcclxuICAgIHNvY2tldC5lbWl0KHNvY2tldEV2ZW50TmFtZSwgc29ja2V0QWN0aW9uLCAoZXJyb3IsIGRhdGEpID0+IHtcclxuICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgIHJldHVybiByZWplY3Qoe1xyXG4gICAgICAgICAgdHJhbnNwb3J0OiBUcmFuc3BvcnRNZXRob2RFbnVtLlNPQ0tFVCxcclxuICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIHJldHVybiByZXNvbHZlKGRhdGEpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkaXNwYXRjaFRvU29ja2V0OyJdfQ==