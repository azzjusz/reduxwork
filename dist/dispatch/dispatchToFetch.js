"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _dispatchAction = _interopRequireDefault(require("./dispatchAction"));
var _buildFetchOptions = _interopRequireDefault(require("./buildFetchOptions"));
var _buildUrl = _interopRequireDefault(require("./buildUrl"));
var _getFetchMethod = _interopRequireDefault(require("./getFetchMethod"));
var _constants = require("../lib/constants");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

var dispatchToFetch = function dispatchToFetch(options, fetchFunction, action) {
  if (!fetchFunction)
  throw new Error('Reduxwork: fetch is not configured.');

  return (0, _dispatchAction.default)(options, action, function (resolve, reject) {
    var fetchMethod = (0, _getFetchMethod.default)(action, options);
    return fetchFunction(
    (0, _buildUrl.default)(options, action, fetchMethod),
    (0, _buildFetchOptions.default)(options, action, fetchMethod)).
    then(function (response) {
      if (response.ok)
      return response.json();else

      return reject({
        transport: _constants.TransportMethodEnum.FETCH,
        error: response.statusText,
        response: response });

    }).then(function (data) {return (
        resolve(data));});

  });
};var _default =

dispatchToFetch;exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NvdXJjZS9kaXNwYXRjaC9kaXNwYXRjaFRvRmV0Y2guanMiXSwibmFtZXMiOlsiZGlzcGF0Y2hUb0ZldGNoIiwib3B0aW9ucyIsImZldGNoRnVuY3Rpb24iLCJhY3Rpb24iLCJFcnJvciIsInJlc29sdmUiLCJyZWplY3QiLCJmZXRjaE1ldGhvZCIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwianNvbiIsInRyYW5zcG9ydCIsIlRyYW5zcG9ydE1ldGhvZEVudW0iLCJGRVRDSCIsImVycm9yIiwic3RhdHVzVGV4dCIsImRhdGEiXSwibWFwcGluZ3MiOiJvR0FBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDOztBQUVBLElBQU1BLGVBQWUsR0FBRyxTQUFsQkEsZUFBa0IsQ0FBQ0MsT0FBRCxFQUFVQyxhQUFWLEVBQXlCQyxNQUF6QixFQUFvQztBQUMxRCxNQUFJLENBQUNELGFBQUw7QUFDRSxRQUFNLElBQUlFLEtBQUosQ0FBVSxxQ0FBVixDQUFOOztBQUVGLFNBQU8sNkJBQWVILE9BQWYsRUFBd0JFLE1BQXhCLEVBQWdDLFVBQUNFLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUMxRCxRQUFNQyxXQUFXLEdBQUcsNkJBQWVKLE1BQWYsRUFBdUJGLE9BQXZCLENBQXBCO0FBQ0EsV0FBT0MsYUFBYTtBQUNsQiwyQkFBU0QsT0FBVCxFQUFrQkUsTUFBbEIsRUFBMEJJLFdBQTFCLENBRGtCO0FBRWxCLG9DQUFrQk4sT0FBbEIsRUFBMkJFLE1BQTNCLEVBQW1DSSxXQUFuQyxDQUZrQixDQUFiO0FBR0xDLElBQUFBLElBSEssQ0FHQSxVQUFBQyxRQUFRLEVBQUk7QUFDakIsVUFBSUEsUUFBUSxDQUFDQyxFQUFiO0FBQ0UsYUFBT0QsUUFBUSxDQUFDRSxJQUFULEVBQVAsQ0FERjs7QUFHRSxhQUFPTCxNQUFNLENBQUM7QUFDWk0sUUFBQUEsU0FBUyxFQUFFQywrQkFBb0JDLEtBRG5CO0FBRVpDLFFBQUFBLEtBQUssRUFBRU4sUUFBUSxDQUFDTyxVQUZKO0FBR1pQLFFBQUFBLFFBQVEsRUFBUkEsUUFIWSxFQUFELENBQWI7O0FBS0gsS0FaTSxFQVlKRCxJQVpJLENBWUMsVUFBQVMsSUFBSTtBQUNWWixRQUFBQSxPQUFPLENBQUNZLElBQUQsQ0FERyxHQVpMLENBQVA7O0FBZUQsR0FqQk0sQ0FBUDtBQWtCRCxDQXRCRCxDOztBQXdCZWpCLGUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGlzcGF0Y2hBY3Rpb24gZnJvbSAnLi9kaXNwYXRjaEFjdGlvbic7XHJcbmltcG9ydCBidWlsZEZldGNoT3B0aW9ucyBmcm9tICcuL2J1aWxkRmV0Y2hPcHRpb25zJztcclxuaW1wb3J0IGJ1aWxkVXJsIGZyb20gJy4vYnVpbGRVcmwnO1xyXG5pbXBvcnQgZ2V0RmV0Y2hNZXRob2QgZnJvbSAnLi9nZXRGZXRjaE1ldGhvZCc7XHJcbmltcG9ydCB7IFRyYW5zcG9ydE1ldGhvZEVudW0gfSBmcm9tICcuLi9saWIvY29uc3RhbnRzJztcclxuXHJcbmNvbnN0IGRpc3BhdGNoVG9GZXRjaCA9IChvcHRpb25zLCBmZXRjaEZ1bmN0aW9uLCBhY3Rpb24pID0+IHtcclxuICBpZiAoIWZldGNoRnVuY3Rpb24pXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHV4d29yazogZmV0Y2ggaXMgbm90IGNvbmZpZ3VyZWQuJyk7XHJcblxyXG4gIHJldHVybiBkaXNwYXRjaEFjdGlvbihvcHRpb25zLCBhY3Rpb24sIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IGZldGNoTWV0aG9kID0gZ2V0RmV0Y2hNZXRob2QoYWN0aW9uLCBvcHRpb25zKTtcclxuICAgIHJldHVybiBmZXRjaEZ1bmN0aW9uKFxyXG4gICAgICBidWlsZFVybChvcHRpb25zLCBhY3Rpb24sIGZldGNoTWV0aG9kKSxcclxuICAgICAgYnVpbGRGZXRjaE9wdGlvbnMob3B0aW9ucywgYWN0aW9uLCBmZXRjaE1ldGhvZClcclxuICAgICkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIGlmIChyZXNwb25zZS5vaylcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIHJlamVjdCh7XHJcbiAgICAgICAgICB0cmFuc3BvcnQ6IFRyYW5zcG9ydE1ldGhvZEVudW0uRkVUQ0gsXHJcbiAgICAgICAgICBlcnJvcjogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcclxuICAgICAgICAgIHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KS50aGVuKGRhdGEgPT5cclxuICAgICAgcmVzb2x2ZShkYXRhKVxyXG4gICAgKTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRpc3BhdGNoVG9GZXRjaDsiXX0=